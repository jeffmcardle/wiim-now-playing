{"mappings":"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","sources":["<anon>","src/js/debug.js"],"sourcesContent":["var $4165fb5e9d27a5f7$exports = {};\n// =======================================================\n// WiiM Now Playing\n// Debugging script for the WiiM Now Playing server\n// Namespacing\nwindow.WNP = window.WNP || {};\n// Default settings\nWNP.s = {\n    // Host runs on default port 80, but in cases where another port is chosen adapt\n    locHostname: location.hostname,\n    locPort: location.port && location.port != \"80\" && location.port != \"1234\" ? location.port : \"80\",\n    rndAlbumArtUri: \"./img/fake-album-1.jpg\",\n    // Device selection\n    aDeviceUI: [\n        \"btnRefresh\",\n        \"selDeviceChoices\",\n        \"devName\",\n        \"mediaTitle\",\n        \"mediaSubTitle\",\n        \"mediaArtist\",\n        \"mediaAlbum\",\n        \"mediaBitRate\",\n        \"mediaBitDepth\",\n        \"mediaSampleRate\",\n        \"mediaQualityIdent\",\n        \"devVol\",\n        \"mediaSource\"\n    ],\n    // Server actions to be used in the app\n    aServerUI: [\n        \"btnReboot\",\n        \"btnUpdate\",\n        \"btnShutdown\",\n        \"btnReloadUI\",\n        \"sServerUrlHostname\",\n        \"sServerUrlIP\",\n        \"sServerVersion\",\n        \"sClientVersion\"\n    ],\n    // Ticks to be used in the app (debug)\n    aTicksUI: [\n        \"tickDevicesGetUp\",\n        \"tickDevicesRefreshUp\",\n        \"tickServerSettingsUp\",\n        \"tickStateUp\",\n        \"tickStateDown\",\n        \"tickMetadataUp\",\n        \"tickMetadataDown\",\n        \"tickDeviceSetUp\",\n        \"tickDeviceSetDown\",\n        \"tickServerSettingsDown\",\n        \"tickDevicesGetDown\",\n        \"tickDevicesRefreshDown\",\n        \"tickVolumeGetUp\",\n        \"tickVolumeGetDown\",\n        \"tickVolumeSetUp\",\n        \"tickVolumeSetDown\",\n        \"tickPresetsListUp\",\n        \"tickPresetsListDown\"\n    ],\n    // Debug UI elements\n    aDebugUI: [\n        \"state\",\n        \"metadata\",\n        \"sPresetsList\",\n        \"sServerSettings\",\n        \"sManufacturer\",\n        \"sModelName\",\n        \"sLocation\",\n        \"sTimeStampDiff\",\n        \"sAlbumArtUri\",\n        \"sAlbumArtUriRaw\",\n        \"sAlbumArtUriStatus\",\n        \"oPresetsGroup\",\n        \"btnDevices\",\n        \"btnGetVolume\",\n        \"btnSetVolume\",\n        \"mediaLoopMode\",\n        \"sTransportState\",\n        \"sPlayMedium\",\n        \"sPlayerProgress\"\n    ]\n};\n// Data placeholders.\nWNP.d = {\n    serverSettings: null,\n    deviceList: null,\n    prevTransportState: null,\n    prevPlayMedium: null,\n    prevSourceIdent: null,\n    prevTrackInfo: null // Previous track info, used to detect changes in the metadata\n};\n// Reference placeholders.\n// These are set in the init function\n// and are used to reference the UI elements in the app.\nWNP.r = {};\n/**\n * Initialisation of app.\n * @returns {undefined}\n */ WNP.Init = function() {\n    console.log(\"WNP\", \"Initialising...\");\n    // Init Socket.IO, connect to port where server resides\n    console.log(\"WNP\", \"Listening on \" + this.s.locHostname + \":\" + this.s.locPort);\n    window.socket = io.connect(\":\" + this.s.locPort);\n    // Set references to the UI elements\n    this.setUIReferences();\n    // Set tick handlers\n    this.setTickHandlers();\n    // Set Socket.IO definitions\n    this.setSocketDefinitions();\n    // Set UI event listeners\n    this.setUIListeners();\n    // Initial calls, wait a bit for socket to start\n    setTimeout(()=>{\n        // Get server settings\n        this.r.tickServerSettingsUp.classList.add(\"tickAnimate\");\n        socket.emit(\"server-settings\");\n        // Get devices\n        this.r.tickDevicesGetUp.classList.add(\"tickAnimate\");\n        socket.emit(\"devices-get\");\n        // // Get volume\n        // this.r.tickVolumeGetUp.classList.add(\"tickAnimate\");\n        // socket.emit(\"device-api\", \"getPlayerStatus\");\n        // Get presets\n        this.r.tickPresetsListUp.classList.add(\"tickAnimate\");\n        socket.emit(\"device-api\", \"getPresetInfo\");\n    }, 500);\n    // Create random album intervals, every 3 minutes\n    WNP.s.rndAlbumArtUri = WNP.rndAlbumArt(\"fake-album-\");\n    var rndAlbumInterval = setInterval(function() {\n        WNP.s.rndAlbumArtUri = WNP.rndAlbumArt(\"fake-album-\");\n    }, 180000);\n};\n/**\n * Reference to the UI elements of the app.\n * @returns {undefined}\n */ WNP.setUIReferences = function() {\n    console.log(\"WNP\", \"Set UI references...\");\n    function addElementToRef(id) {\n        const element = document.getElementById(id);\n        if (element) WNP.r[id] = element;\n        else console.warn(\"WNP\", `Element with ID '${id}' not found in current HTML.`);\n    }\n    // Set references to the UI elements\n    this.s.aDeviceUI.forEach((id)=>{\n        addElementToRef(id);\n    });\n    this.s.aServerUI.forEach((id)=>{\n        addElementToRef(id);\n    });\n    this.s.aTicksUI.forEach((id)=>{\n        addElementToRef(id);\n    });\n    this.s.aDebugUI.forEach((id)=>{\n        addElementToRef(id);\n    });\n};\n/**\n * Set the tick event handlers for the app.\n * @returns {undefined}\n */ WNP.setTickHandlers = function() {\n    function removeTickAnimate(e) {\n        e.target.classList.remove(\"tickAnimate\");\n    }\n    // Set the tick handlers for the app\n    this.s.aTicksUI.forEach((tick)=>{\n        if (this.r[tick]) this.r[tick].addEventListener(\"animationend\", removeTickAnimate);\n        else console.warn(\"WNP\", `Element with ID '${tick}' not found.`);\n    });\n};\n/**\n * Setting the listeners on the UI elements of the app.\n * @returns {undefined}\n */ WNP.setUIListeners = function() {\n    console.log(\"WNP\", \"Set UI Listeners...\");\n    // ------------------------------------------------\n    // Player buttons\n    // (no player buttons in debug mode)\n    // ------------------------------------------------\n    // Settings buttons\n    // Device selection dropdown\n    this.r.selDeviceChoices.addEventListener(\"change\", function() {\n        WNP.r.tickDeviceSetUp.classList.add(\"tickAnimate\");\n        socket.emit(\"device-set\", this.value);\n    });\n    // Devices get button\n    this.r.btnDevices.addEventListener(\"click\", function() {\n        WNP.r.tickDevicesGetUp.classList.add(\"tickAnimate\");\n        socket.emit(\"devices-get\");\n    });\n    // Refresh devices button\n    this.r.btnRefresh.addEventListener(\"click\", function() {\n        WNP.r.tickDevicesRefreshUp.classList.add(\"tickAnimate\");\n        socket.emit(\"devices-refresh\");\n        // Wait for discovery to finish\n        setTimeout(()=>{\n            WNP.r.tickDevicesGetUp.classList.add(\"tickAnimate\");\n            socket.emit(\"devices-get\");\n            WNP.r.tickServerSettingsUp.classList.add(\"tickAnimate\");\n            socket.emit(\"server-settings\");\n            WNP.r.tickPresetsListUp.classList.add(\"tickAnimate\");\n            socket.emit(\"device-api\", \"getPresetInfo\");\n        }, 5000);\n    });\n    // Get volume button\n    this.r.btnGetVolume.addEventListener(\"click\", function() {\n        WNP.r.tickVolumeGetUp.classList.add(\"tickAnimate\");\n        socket.emit(\"device-api\", \"getPlayerStatus\");\n    });\n    // Set volume button\n    this.r.btnSetVolume.addEventListener(\"click\", function() {\n        var volume = parseInt(WNP.r.devVol.value);\n        if (isNaN(volume) || volume < 0 || volume > 100) {\n            alert(\"Please enter a valid volume between 0 and 100.\");\n            return;\n        }\n        WNP.r.tickVolumeSetUp.classList.add(\"tickAnimate\");\n        socket.emit(\"device-api\", \"setPlayerCmd:vol:\" + volume);\n    });\n    // Reboot button\n    this.r.btnReboot.addEventListener(\"click\", function() {\n        socket.emit(\"server-reboot\");\n    });\n    // Update button\n    this.r.btnUpdate.addEventListener(\"click\", function() {\n        socket.emit(\"server-update\");\n    });\n    // Shutdown button\n    this.r.btnShutdown.addEventListener(\"click\", function() {\n        socket.emit(\"server-shutdown\");\n    });\n    // Reload UI button\n    this.r.btnReloadUI.addEventListener(\"click\", function() {\n        location.reload();\n    });\n};\n/**\n * Set the socket definitions to listen for specific websocket traffic and handle accordingly.\n * @returns {undefined}\n */ WNP.setSocketDefinitions = function() {\n    console.log(\"WNP\", \"Setting Socket definitions...\");\n    // On server settings\n    socket.on(\"server-settings\", function(msg) {\n        console.log(\"IO: server-settings\", msg);\n        WNP.r.tickServerSettingsDown.classList.add(\"tickAnimate\");\n        // Store server settings\n        WNP.d.serverSettings = msg;\n        WNP.r.sServerSettings.innerHTML = JSON.stringify(msg);\n        // RPi has bash, so possibly able to reboot/shutdown.\n        if (msg && msg.os && msg.os.userInfo && msg.os.userInfo.shell === \"/bin/bash\") {\n            WNP.r.btnReboot.disabled = false;\n            WNP.r.btnUpdate.disabled = false;\n            WNP.r.btnShutdown.disabled = false;\n        }\n        // Set device name\n        WNP.r.devName.innerText = msg && msg.selectedDevice && msg.selectedDevice.friendlyName ? msg.selectedDevice.friendlyName : \"-\";\n        WNP.r.sManufacturer.innerText = msg && msg.selectedDevice && msg.selectedDevice.manufacturer ? msg.selectedDevice.manufacturer : \"-\";\n        WNP.r.sModelName.innerText = msg && msg.selectedDevice && msg.selectedDevice.modelName ? msg.selectedDevice.modelName : \"-\";\n        WNP.r.sLocation.innerHTML = msg && msg.selectedDevice && msg.selectedDevice.location ? \"<a href=\\\"\" + msg.selectedDevice.location + \"\\\">\" + msg.selectedDevice.location + \"</a>\" : \"-\";\n        // Set the server local url\n        if (msg && msg.os && msg.os.hostname) {\n            var sUrl = \"http://\" + msg.os.hostname.toLowerCase() + \".local\";\n            sUrl += location && location.port && location.port != 80 ? \":\" + location.port + \"/\" : \"/\";\n            WNP.r.sServerUrlHostname.innerHTML = \"<a href=\\\"\" + sUrl + \"\\\">\" + sUrl + \"</a>\";\n        } else WNP.r.sServerUrlHostname.innerText = \"-\";\n        // Set the server ip address\n        if (msg && msg.selectedDevice && msg.selectedDevice.location && msg.os && msg.os.networkInterfaces) {\n            // Grab the ip address pattern of the selected device\n            // Assumption is that the wiim-now-playing server is on the same ip range as the client..\n            var sLocationIp = msg.selectedDevice.location.split(\"/\")[2]; // Extract ip address from location\n            var aIpAddress = sLocationIp.split(\".\"); // Split ip address in parts\n            aIpAddress.pop(); // Remove the last part\n            var sIpPattern = aIpAddress.join(\".\"); // Construct ip address pattern\n            // Search for server ip address(es) in this range...\n            Object.keys(msg.os.networkInterfaces).forEach(function(key, index) {\n                var sIpFound = msg.os.networkInterfaces[key].find((addr)=>addr.address.startsWith(sIpPattern));\n                if (sIpFound) {\n                    // Construct ip address and optional port\n                    var sUrl = \"http://\" + sIpFound.address;\n                    sUrl += location && location.port && location.port != 80 ? \":\" + location.port + \"/\" : \"/\";\n                    WNP.r.sServerUrlIP.innerHTML = \"<a href=\\\"\" + sUrl + \"\\\">\" + sUrl + \"</a>\";\n                }\n            });\n        } else WNP.r.sServerUrlIP.innerText = \"-\";\n        // Set the server version\n        WNP.r.sServerVersion.innerText = msg && msg.version && msg.version.server ? msg.version.server : \"-\";\n        // Set the client version\n        WNP.r.sClientVersion.innerText = msg && msg.version && msg.version.client ? msg.version.client : \"-\";\n    });\n    // On devices get\n    socket.on(\"devices-get\", function(msg) {\n        console.log(\"IO: devices-get\", msg);\n        WNP.r.tickDevicesGetDown.classList.add(\"tickAnimate\");\n        // Store and sort device list\n        WNP.d.deviceList = msg;\n        WNP.d.deviceList.sort((a, b)=>{\n            return a.friendlyName < b.friendlyName ? -1 : 1;\n        });\n        // Clear choices\n        WNP.r.selDeviceChoices.innerHTML = \"<option value=\\\"\\\">Select a device...</em></li>\";\n        // Add WiiM devices\n        var devicesWiiM = WNP.d.deviceList.filter((d)=>{\n            return d.manufacturer.startsWith(\"Linkplay\");\n        });\n        if (devicesWiiM.length > 0) {\n            // Device select options\n            var optGroup = document.createElement(\"optgroup\");\n            optGroup.label = \"WiiM devices\";\n            devicesWiiM.forEach((device)=>{\n                var opt = document.createElement(\"option\");\n                opt.value = device.location;\n                opt.innerText = device.friendlyName;\n                opt.title = \"By \" + device.manufacturer;\n                if (WNP.d.serverSettings && WNP.d.serverSettings.selectedDevice && WNP.d.serverSettings.selectedDevice.location === device.location) opt.setAttribute(\"selected\", \"selected\");\n                optGroup.appendChild(opt);\n            });\n            WNP.r.selDeviceChoices.appendChild(optGroup);\n        }\n        // Other devices\n        // Possibly removing this section in future releases.\n        var devicesOther = WNP.d.deviceList.filter((d)=>{\n            return !d.manufacturer.startsWith(\"Linkplay\");\n        });\n        if (devicesOther.length > 0) {\n            // Device select dropdown options\n            var optGroup = document.createElement(\"optgroup\");\n            optGroup.label = \"Other devices\";\n            devicesOther.forEach((device)=>{\n                var opt = document.createElement(\"option\");\n                opt.value = device.location;\n                opt.innerText = device.friendlyName;\n                opt.title = \"By \" + device.manufacturer;\n                if (WNP.d.serverSettings && WNP.d.serverSettings.selectedDevice && WNP.d.serverSettings.selectedDevice.location === device.location) opt.setAttribute(\"selected\", \"selected\");\n                optGroup.appendChild(opt);\n            });\n            WNP.r.selDeviceChoices.appendChild(optGroup);\n        }\n        // No devices found\n        if (devicesWiiM.length == 0 && devicesOther.length == 0) WNP.r.selDeviceChoices.innerHTML = \"<option disabled=\\\"disabled\\\">No devices found!</em></li>\";\n    });\n    // On state\n    socket.on(\"state\", function(msg) {\n        if (!msg) return false;\n        WNP.r.tickStateDown.classList.add(\"tickAnimate\");\n        WNP.r.state.innerHTML = JSON.stringify(msg);\n        // Get player progress data from the state message.\n        var timeStampDiff = 0;\n        if (msg.CurrentTransportState === \"PLAYING\") timeStampDiff = msg.stateTimeStamp && msg.metadataTimeStamp ? Math.round((msg.stateTimeStamp - msg.metadataTimeStamp) / 1000) : 0;\n        var relTime = msg.RelTime ? msg.RelTime : \"00:00:00\";\n        var trackDuration = msg.TrackDuration ? msg.TrackDuration : \"00:00:00\";\n        WNP.r.sTimeStampDiff.innerHTML = timeStampDiff + \"s\";\n        // Get current player progress and set UI elements accordingly.\n        var oPlayerProgress = WNP.getPlayerProgress(relTime, trackDuration, timeStampDiff, msg.CurrentTransportState);\n        WNP.r.sPlayerProgress.innerText = JSON.stringify(oPlayerProgress);\n        // Device transport state or play medium changed...?\n        if (WNP.d.prevTransportState !== msg.CurrentTransportState || WNP.d.prevPlayMedium !== msg.PlayMedium) {\n            WNP.r.sTransportState.innerText = msg.CurrentTransportState;\n            WNP.r.sPlayMedium.innerText = msg.PlayMedium;\n            WNP.d.prevTransportState = msg.CurrentTransportState; // Remember the last transport state\n            WNP.d.prevPlayMedium = msg.PlayMedium; // Remember the last PlayMedium\n        }\n    });\n    // On metadata\n    socket.on(\"metadata\", function(msg) {\n        if (!msg) return false;\n        WNP.r.tickMetadataDown.classList.add(\"tickAnimate\");\n        WNP.r.metadata.innerHTML = JSON.stringify(msg);\n        // Source detection\n        var playMedium = msg.PlayMedium ? msg.PlayMedium : \"\";\n        var trackSource = msg.TrackSource ? msg.TrackSource : \"\";\n        var sourceIdent = WNP.getSourceIdent(playMedium, trackSource);\n        // Did the source ident change...?\n        if (sourceIdent !== WNP.d.prevSourceIdent) {\n            if (sourceIdent !== \"\") mediaSource.innerText = playMedium + \": \" + trackSource + \" (\" + sourceIdent + \")\";\n            else mediaSource.innerText = playMedium + \": \" + trackSource;\n            WNP.d.prevSourceIdent = sourceIdent; // Remember the last Source Ident\n        }\n        // Song Title, Subtitle, Artist, Album\n        WNP.r.mediaTitle.innerText = msg.trackMetaData && msg.trackMetaData[\"dc:title\"] ? msg.trackMetaData[\"dc:title\"] : \"\";\n        WNP.r.mediaSubTitle.innerText = msg.trackMetaData && msg.trackMetaData[\"dc:subtitle\"] ? msg.trackMetaData[\"dc:subtitle\"] : \"\";\n        WNP.r.mediaArtist.innerText = msg.trackMetaData && msg.trackMetaData[\"upnp:artist\"] ? msg.trackMetaData[\"upnp:artist\"] : \"\";\n        WNP.r.mediaAlbum.innerText = msg.trackMetaData && msg.trackMetaData[\"upnp:album\"] ? msg.trackMetaData[\"upnp:album\"] : \"\";\n        // Audio quality\n        var songBitrate = msg.trackMetaData && msg.trackMetaData[\"song:bitrate\"] ? msg.trackMetaData[\"song:bitrate\"] : \"\";\n        var songBitDepth = msg.trackMetaData && msg.trackMetaData[\"song:format_s\"] ? msg.trackMetaData[\"song:format_s\"] : \"\";\n        var songSampleRate = msg.trackMetaData && msg.trackMetaData[\"song:rate_hz\"] ? msg.trackMetaData[\"song:rate_hz\"] : \"\";\n        WNP.r.mediaBitRate.innerText = songBitrate > 0 ? songBitrate > 1000 ? (songBitrate / 1000).toFixed(2) + \" mbps (\" + songBitrate + \")\" : songBitrate + \" kbps (\" + songBitrate + \")\" : \"\";\n        WNP.r.mediaBitDepth.innerText = songBitDepth > 0 ? songBitDepth > 24 ? \"24 bit (\" + songBitDepth + \")\" : songBitDepth + \" bit (\" + songBitDepth + \")\" : \"\";\n        WNP.r.mediaSampleRate.innerText = songSampleRate > 0 ? (songSampleRate / 1000).toFixed(1) + \" kHz (\" + songSampleRate + \")\" : \"\";\n        // Audio quality ident badge (HD/Hi-res/CD/...)\n        var songQuality = msg.trackMetaData && msg.trackMetaData[\"song:quality\"] ? msg.trackMetaData[\"song:quality\"] : \"\";\n        var songActualQuality = msg.trackMetaData && msg.trackMetaData[\"song:actualQuality\"] ? msg.trackMetaData[\"song:actualQuality\"] : \"\";\n        var qualiIdent = WNP.getQualityIdent(songQuality, songActualQuality, songBitrate, songBitDepth, songSampleRate);\n        if (qualiIdent !== \"\") WNP.r.mediaQualityIdent.innerText = qualiIdent + \" (\" + songQuality + \", \" + songActualQuality + \")\";\n        else WNP.r.mediaQualityIdent.innerText = songQuality + \", \" + songActualQuality;\n        // Pre-process Album Art uri, if any is available from the metadata.\n        var albumArtUriRaw = msg.trackMetaData && msg.trackMetaData[\"upnp:albumArtURI\"] ? msg.trackMetaData[\"upnp:albumArtURI\"] : \"\";\n        var albumArtUri = WNP.checkAlbumArtURI(albumArtUriRaw, msg.metadataTimeStamp);\n        // Set Album Art, only if the track changed and the URI changed\n        var trackChanged = false;\n        var currentTrackInfo = WNP.r.mediaTitle.innerText + \"|\" + WNP.r.mediaSubTitle.innerText + \"|\" + WNP.r.mediaArtist.innerText + \"|\" + WNP.r.mediaAlbum.innerText;\n        var currentAlbumArt = WNP.r.sAlbumArtUri.innerText;\n        if (WNP.d.prevTrackInfo !== currentTrackInfo) {\n            trackChanged = true;\n            WNP.d.prevTrackInfo = currentTrackInfo; // Remember the last track info\n            console.log(\"WNP\", \"Track changed:\", currentTrackInfo);\n        }\n        if (trackChanged && currentAlbumArt != albumArtUri) {\n            WNP.r.sAlbumArtUriRaw.innerText = albumArtUriRaw;\n            WNP.r.sAlbumArtUri.innerText = albumArtUri;\n        }\n        // Device volume\n        WNP.r.devVol.value = msg.CurrentVolume ? msg.CurrentVolume : \"-\"; // Set the volume on the UI\n        // Loop mode status\n        if (msg.LoopMode) switch(msg.LoopMode){\n            case \"5\":\n                WNP.r.mediaLoopMode.innerText = \"Shuffle enabled, Repeat enabled - loop once\";\n                break;\n            case \"3\":\n                WNP.r.mediaLoopMode.innerText = \"Shuffle enabled, Repeat disabled\";\n                break;\n            case \"2\":\n                WNP.r.mediaLoopMode.innerText = \"Shuffle enabled, Repeat enabled - loop\";\n                break;\n            case \"1\":\n                WNP.r.mediaLoopMode.innerText = \"Shuffle disabled, Repeat enabled - loop once\";\n                break;\n            case \"0\":\n                WNP.r.mediaLoopMode.innerText = \"Shuffle disabled, Repeat enabled - loop\";\n                break;\n            default:\n                WNP.r.mediaLoopMode.innerText = \"Shuffle disabled, Repeat disabled\";\n        }\n        else WNP.r.mediaLoopMode.innerText = \"Unknown\";\n    });\n    // On device set\n    socket.on(\"device-set\", function(msg) {\n        console.log(\"IO: device-set\", msg);\n        WNP.r.tickDeviceSetDown.classList.add(\"tickAnimate\");\n        // Device switch? Fetch settings and device info again.\n        WNP.r.tickServerSettingsUp.classList.add(\"tickAnimate\");\n        socket.emit(\"server-settings\");\n        WNP.r.tickDevicesGetUp.classList.add(\"tickAnimate\");\n        socket.emit(\"devices-get\");\n        WNP.r.tickVolumeGetUp.classList.add(\"tickAnimate\");\n        socket.emit(\"device-api\", \"getPlayerStatus\");\n        WNP.r.tickPresetsListUp.classList.add(\"tickAnimate\");\n        socket.emit(\"device-api\", \"getPresetInfo\");\n    });\n    // On device refresh\n    socket.on(\"devices-refresh\", function(msg) {\n        console.log(\"IO: devices-refresh\", msg);\n        WNP.r.tickDevicesRefreshDown.classList.add(\"tickAnimate\");\n        WNP.r.selDeviceChoices.innerHTML = \"<option disabled=\\\"disabled\\\">Waiting for devices...</em></li>\";\n    });\n    // On device action (i.e. for play, pause, next, previous)\n    socket.on(\"device-action\", function(msg, param) {\n        // Actions do not return a message.\n        // so we don't need to do anything here.\n        // Maybe later we can use this to show a notification or similar.\n        console.log(\"WNP\", \"Action:\", msg);\n    });\n    // On device API response\n    socket.on(\"device-api\", function(msg, param) {\n        console.log(\"IO: device-api\", msg, param);\n        switch(msg){\n            case \"getPresetInfo\":\n                // Preset info response\n                WNP.r.tickPresetsListDown.classList.add(\"tickAnimate\");\n                WNP.r.sPresetsList.innerHTML = param ? JSON.stringify(param) : \"\";\n                var sCurrentTitle = WNP.r.mediaTitle.innerText;\n                var sCurrentSubtitle = WNP.r.mediaSubTitle.innerText;\n                // Update preset buttons\n                if (WNP.r.oPresetsGroup) {\n                    WNP.r.oPresetsGroup.innerHTML = \"\";\n                    if (param && param.preset_list && param.preset_list.length > 0) param.preset_list.forEach((preset)=>{\n                        var btn = document.createElement(\"button\");\n                        btn.type = \"button\";\n                        btn.classList = \"btn btn-secondary\";\n                        btn.innerText = preset.number;\n                        btn.title = preset.name;\n                        if (preset.name === sCurrentTitle || preset.name === sCurrentSubtitle) btn.classList.add(\"active\");\n                        btn.addEventListener(\"click\", function() {\n                            // Load preset\n                            socket.emit(\"device-api\", \"MCUKeyShortClick:\" + preset.number);\n                            // Highlight button\n                            Array.from(WNP.r.oPresetsGroup.children).forEach((b)=>{\n                                b.classList.remove(\"active\");\n                            });\n                            btn.classList.add(\"active\");\n                        });\n                        WNP.r.oPresetsGroup.appendChild(btn);\n                    });\n                    else {\n                        var p = document.createElement(\"p\");\n                        p.classList = \"form-text text-white\";\n                        p.innerText = \"No presets found\";\n                        WNP.r.oPresetsGroup.appendChild(p);\n                    }\n                }\n                break;\n            case msg.startsWith(\"MCUKeyShortClick:\") ? msg : false:\n                break;\n            case \"getPlayerStatus\":\n                // Player status response\n                // Called when getting volume\n                WNP.r.tickVolumeGetDown.classList.add(\"tickAnimate\");\n                if (param && param.vol !== undefined) WNP.r.devVol.value = param.vol;\n                break;\n            case msg.startsWith(\"setPlayerCmd:vol:\") ? msg : false:\n                // Volume set response\n                WNP.r.tickVolumeSetDown.classList.add(\"tickAnimate\");\n                socket.emit(\"device-api\", \"getPlayerStatus\"); // Refresh volume UI\n                break;\n            default:\n                break;\n        }\n    });\n    // On server reboot\n    socket.on(\"server-reboot\", function(msg) {\n        // Possibly show a notification that reboot is in progress\n        console.log(\"WNP\", \"Server reboot:\", msg);\n    });\n    // On server update\n    socket.on(\"server-update\", function(msg) {\n        // Possibly show a notification that update is in progress\n        console.log(\"WNP\", \"Server update:\", msg);\n    });\n    // On server shutdown\n    socket.on(\"server-shutdown\", function(msg) {\n        // Possibly show a notification that shutdown is in progress\n        console.log(\"WNP\", \"Server shutdown:\", msg);\n    });\n};\n// =======================================================\n// Helper functions\n/**\n * Get player progress helper.\n * @param {string} relTime - Time elapsed while playing, format 00:00:00\n * @param {string} trackDuration - Total play time, format 00:00:00\n * @param {integer} timeStampDiff - Possible play time offset in seconds\n * @param {string} currentTransportState - The current transport state \"PLAYING\" or otherwise\n * @returns {object} An object with corrected played, left, total and percentage played\n */ WNP.getPlayerProgress = function(relTime, trackDuration, timeStampDiff, currentTransportState) {\n    var relTimeSec = this.convertToSeconds(relTime) + timeStampDiff;\n    var trackDurationSec = this.convertToSeconds(trackDuration);\n    if (trackDurationSec > 0 && relTimeSec < trackDurationSec) {\n        var percentPlayed = (relTimeSec / trackDurationSec * 100).toFixed(1);\n        return {\n            played: WNP.convertToMinutes(relTimeSec),\n            left: WNP.convertToMinutes(trackDurationSec - relTimeSec),\n            total: WNP.convertToMinutes(trackDurationSec),\n            percent: percentPlayed\n        };\n    } else if (trackDurationSec == 0 && currentTransportState == \"PLAYING\") return {\n        played: \"Live\",\n        left: \"\",\n        total: \"\",\n        percent: 100\n    };\n    else return {\n        played: \"Paused\",\n        left: \"\",\n        total: \"\",\n        percent: 0\n    };\n};\n/**\n * Convert time format '00:00:00' to total number of seconds.\n * @param {string} sDuration - Time, format 00:00:00.\n * @returns {integer} The number of seconds that the string represents.\n */ WNP.convertToSeconds = function(sDuration) {\n    const timeSections = sDuration.split(\":\");\n    let totalSeconds = 0;\n    for(let i = 0; i < timeSections.length; i++){\n        var nFactor = timeSections.length - 1 - i; // Count backwards\n        var nMultiplier = Math.pow(60, nFactor); // 60^n\n        totalSeconds += nMultiplier * parseInt(timeSections[i]); // Calculate the seconds\n    }\n    return totalSeconds;\n};\n/**\n * Convert number of seconds to '00:00' string format. \n * Sorry for those hour+ long songs...\n * @param {integer} seconds - Number of seconds total.\n * @returns {string} The string representation of seconds in minutes, format 00:00.\n */ WNP.convertToMinutes = function(seconds) {\n    var tempDate = new Date(0);\n    tempDate.setSeconds(seconds);\n    var result = tempDate.toISOString().substring(14, 19);\n    return result;\n};\n/**\n * Check if the album art is a valid URI. Returns the URI if valid, otherwise a random URI.\n * This function creates a virtual image element to check if the album art URI is valid.\n * @param {string} sAlbumArtUri - The URI of the album art.\n * @param {integer} nTimestamp - The time in milliseconds, used as cache buster.\n * @returns {string} The URI of the album art.\n */ WNP.checkAlbumArtURI = function(sAlbumArtUri, nTimestamp) {\n    // Create a virtual image element to check the album art URI behind the scenes\n    var img = new Image();\n    // On successful load\n    img.onload = function() {\n        console.log(\"WNP\", \"Album art loaded successfully.\", \"Size: \" + this.width + \"x\" + this.height + \"px\");\n        WNP.r.sAlbumArtUriStatus.classList = \"bi bi-check-circle-fill\";\n        WNP.r.sAlbumArtUriStatus.title = \"Able to load album art\";\n    };\n    // On error loading the image\n    img.onerror = function() {\n        console.error(\"WNP\", \"Failed to load album art:\", sAlbumArtUri);\n        WNP.r.sAlbumArtUriStatus.classList = \"bi bi-x-circle-fill\";\n        WNP.r.sAlbumArtUriStatus.title = \"Unable to load album art\";\n    };\n    // If the URI starts with https, the self signed certificate may not trusted by the browser.\n    // Hence we always try and load the image through a reverse proxy, ignoring the certificate.\n    if (sAlbumArtUri && sAlbumArtUri.startsWith(\"https\")) {\n        var sAlbumArtProxyUri = \"\";\n        if (WNP.s.locPort != \"80\") sAlbumArtProxyUri = \"http://\" + WNP.s.locHostname + \":\" + WNP.s.locPort + \"/proxy-art?url=\" + encodeURIComponent(sAlbumArtUri) + \"&ts=\" + nTimestamp; // Use the current timestamp as cache buster\n        else sAlbumArtProxyUri = \"http://\" + WNP.s.locHostname + \"/proxy-art?url=\" + encodeURIComponent(sAlbumArtUri) + \"&ts=\" + nTimestamp; // Use the current timestamp as cache buster\n        img.src = sAlbumArtProxyUri; // Test loading the image through the proxy\n        return sAlbumArtProxyUri;\n    } else if (sAlbumArtUri && sAlbumArtUri.startsWith(\"http\")) {\n        img.src = sAlbumArtUri; // Test loading the image directly\n        return sAlbumArtUri;\n    } else {\n        // Looks like an invalid/un_known album art, use the fallback.\n        WNP.r.sAlbumArtUriStatus.classList = \"bi bi-exclamation-circle-fill\";\n        WNP.r.sAlbumArtUriStatus.title = \"Falling back to random album art\";\n        return WNP.s.rndAlbumArtUri;\n    }\n};\n/**\n * Come up with a random album art URI (locally from the img folder).\n * @param {string} prefix - The prefix for the album art URI, i.e. 'fake-album-'\n * @returns {string} An URI for album art\n */ WNP.rndAlbumArt = function(prefix) {\n    return \"./img/\" + prefix + this.rndNumber(1, 16) + \".jpg\";\n};\n/**\n * Get a random number between min and max, including min and max.\n * @param {integer} min - Minimum number to pick, keep it lower than max.\n * @param {integer} max - Maximum number to pick.\n * @returns {integer} The random number\n */ WNP.rndNumber = function(min, max) {\n    return Math.floor(Math.random() * (max - min + 1)) + min;\n};\n/**\n * Get an identifier for the current play medium combined with the tracksource.\n * TODO: Verify all/most sources...\n * @param {string} playMedium - The PlayMedium as indicated by the device. Values: SONGLIST-NETWORK, RADIO-NETWORK, STATION-NETWORK, CAST, AIRPLAY, SPOTIFY, UNKOWN\n * @param {string} trackSource - The stream source as indicated by the device. Values: Prime, Qobuz, SPOTIFY, newTuneIn, iHeartRadio, Deezer, UPnPServer, Tidal, vTuner\n * @returns {string} The uri to the source identifier (image url)\n */ WNP.getSourceIdent = function(playMedium, trackSource) {\n    var sIdentUri = \"\";\n    switch(playMedium.toLowerCase()){\n        case \"airplay\":\n            sIdentUri = \"./img/sources/airplay2.png\";\n            break;\n        case \"third-dlna\":\n            sIdentUri = \"./img/sources/dlna2.png\";\n            break;\n        case \"cast\":\n            sIdentUri = \"./img/sources/chromecast2.png\";\n            break;\n        case \"radio-network\":\n            sIdentUri = \"./img/sources/radio.png\";\n            break;\n        case \"songlist-network\":\n            sIdentUri = \"./img/sources/ethernet2.png\";\n            break;\n        case \"spotify\":\n            sIdentUri = \"./img/sources/spotify.png\";\n            break;\n        case \"squeezelite\":\n            sIdentUri = \"./img/sources/music-assistant2.png\";\n            break;\n        case \"none\":\n            sIdentUri = \"./img/sources/none2.png\";\n            break;\n        case \"bluetooth\":\n            sIdentUri = \"./img/sources/bluetooth2.png\";\n            break;\n        case \"hdmi\":\n            sIdentUri = \"./img/sources/hdmi2.png\";\n            break;\n        case \"line-in\":\n            sIdentUri = \"./img/sources/line-in2.png\";\n            break;\n        case \"optical\":\n            sIdentUri = \"./img/sources/spdif2.png\";\n            break;\n    }\n    switch(trackSource.toLowerCase()){\n        case \"deezer\":\n        case \"deezer2\":\n            sIdentUri = \"./img/sources/deezer.png\";\n            break;\n        case \"iheartradio\":\n            sIdentUri = \"./img/sources/iheart.png\";\n            break;\n        case \"newtunein\":\n            sIdentUri = \"./img/sources/newtunein.png\";\n            break;\n        case \"plex\":\n            sIdentUri = \"./img/sources/plex.png\";\n            break;\n        case \"prime\":\n            sIdentUri = \"./img/sources/amazon-music2.png\";\n            break;\n        case \"qobuz\":\n            sIdentUri = \"./img/sources/qobuz2.png\";\n            break;\n        case \"tidal\":\n            sIdentUri = \"./img/sources/tidal2.png\";\n            break;\n        case \"upnpserver\":\n            sIdentUri = \"./img/sources/dlna2.png\";\n            break;\n        case \"vtuner\":\n            sIdentUri = \"./img/sources/vtuner2.png\";\n            break;\n    }\n    return sIdentUri;\n};\n/**\n * Get an identifier for the current audio/song quality.\n * TODO: Verify all/most sources...\n * Found so far:\n * \n * CD Quality: 44.1 KHz/16 bit. Bitrate 1,411 kbps. For mp3 bitrate can vary, but also be 320/192/160/128/... kbps.\n * Hi-Res quality: 96 kHz/24 bit and up. Bitrate 9,216 kbps.\n * \n * Spotify Lossless: bitrate 700 kbps, 44.1 kHz/24 bit\n * Spotify and Pandora usual bitrate 160 kbps, premium is 320 kbps\n * Tidal has CD quality, and FLAC, MQA, Master, ...\n * Qobuz apparently really has hi-res?\n * Amazon Music (Unlimited) does Atmos?\n * Apple Music -> Airplay 2, does hi-res?\n * YouTube Music -> Cast, does what?\n * \n * TIDAL -\n * Sample High: \"song:quality\":\"2\",\"song:actualQuality\":\"LOSSLESS\"\n * Sample MQA: \"song:quality\":\"3\",\"song:actualQuality\":\"HI_RES\"\n * Sample FLAC: \"song:quality\":\"4\",\"song:actualQuality\":\"HI_RES_LOSSLESS\"\n * \n * @param {integer} songQuality - A number identifying the quality, as indicated by the streaming service(?).\n * @param {string} songActualQuality - An indicator for the actual quality, as indicated by the streaming service(?).\n * @param {integer} songBitrate - The current bitrate in kilobit per second.\n * @param {integer} songBitDepth - The current sample depth in bits.\n * @param {integer} songSampleRate - The current sample rate in Hz.\n * @returns {string} The identifier for the audio quality, just a string.\n */ WNP.getQualityIdent = function(songQuality, songActualQuality, songBitrate, songBitDepth, songSampleRate) {\n    // console.log(songQuality, songActualQuality, songBitrate, songBitDepth, songSampleRate);\n    var sIdent = \"\";\n    if (songBitrate >= 700 && songBitDepth == 24 && songSampleRate == 44100) sIdent = \"Lossless\";\n    if (songBitrate > 1000 && songBitDepth == 16 && songSampleRate == 44100) sIdent = \"CD\";\n    else if (songBitrate > 7000 && songBitDepth >= 24 && songSampleRate >= 96000) sIdent = \"Hi-Res\";\n    // Based of Tidal/Amazon Music Unlimited/Deezer/Qobuz\n    switch(songQuality + \":\" + songActualQuality){\n        case \"2:LOSSLESS\":\n        case \":LOSSLESS\":\n            sIdent = \"HIGH\";\n            break;\n        case \"3:HI_RES\":\n            sIdent = \"MQA\";\n            break;\n        case \"4:HI_RES_LOSSLESS\":\n        case \":HI_RES_LOSSLESS\":\n        case \"0:LOSSLESS\":\n            sIdent = \"FLAC\";\n            break;\n        case \":UHD\":\n            sIdent = \"ULTRA HD\";\n            break;\n        case \":HD\":\n            sIdent = \"HD\"; // Amazon Music\n            break;\n        case \"3:7\":\n        case \"4:27\":\n            sIdent = \"Hi-Res\"; // Qobuz\n            break;\n        case \"2:6\":\n            sIdent = \"CD\"; // Qobuz\n            break;\n    }\n    return sIdent;\n};\n// =======================================================\n// Start WiiM Now Playing app debugger\nWNP.Init();\n\n\n//# sourceMappingURL=debug.5fba14c8.js.map\n","// =======================================================\n// WiiM Now Playing\n// Debugging script for the WiiM Now Playing server\n\n// Namespacing\nwindow.WNP = window.WNP || {};\n\n// Default settings\nWNP.s = {\n    // Host runs on default port 80, but in cases where another port is chosen adapt\n    locHostname: location.hostname,\n    locPort: (location.port && location.port != \"80\" && location.port != \"1234\") ? location.port : \"80\",\n    rndAlbumArtUri: \"./img/fake-album-1.jpg\",\n    // Device selection\n    aDeviceUI: [\"btnRefresh\", \"selDeviceChoices\", \"devName\", \"mediaTitle\", \"mediaSubTitle\", \"mediaArtist\", \"mediaAlbum\", \"mediaBitRate\", \"mediaBitDepth\", \"mediaSampleRate\", \"mediaQualityIdent\", \"devVol\", \"mediaSource\"],\n    // Server actions to be used in the app\n    aServerUI: [\"btnReboot\", \"btnUpdate\", \"btnShutdown\", \"btnReloadUI\", \"sServerUrlHostname\", \"sServerUrlIP\", \"sServerVersion\", \"sClientVersion\"],\n    // Ticks to be used in the app (debug)\n    aTicksUI: [\"tickDevicesGetUp\", \"tickDevicesRefreshUp\", \"tickServerSettingsUp\", \"tickStateUp\", \"tickStateDown\", \"tickMetadataUp\", \"tickMetadataDown\", \"tickDeviceSetUp\", \"tickDeviceSetDown\", \"tickServerSettingsDown\", \"tickDevicesGetDown\", \"tickDevicesRefreshDown\", \"tickVolumeGetUp\", \"tickVolumeGetDown\", \"tickVolumeSetUp\", \"tickVolumeSetDown\", \"tickPresetsListUp\", \"tickPresetsListDown\"],\n    // Debug UI elements\n    aDebugUI: [\"state\", \"metadata\", \"sPresetsList\", \"sServerSettings\", \"sManufacturer\", \"sModelName\", \"sLocation\", \"sTimeStampDiff\", \"sAlbumArtUri\", \"sAlbumArtUriRaw\", \"sAlbumArtUriStatus\", \"oPresetsGroup\", \"btnDevices\", \"btnGetVolume\", \"btnSetVolume\", \"mediaLoopMode\", \"sTransportState\", \"sPlayMedium\", \"sPlayerProgress\"]\n};\n\n// Data placeholders.\nWNP.d = {\n    serverSettings: null, // Server settings, used to store the server settings\n    deviceList: null, // Device list, used to store the devices found through SSDP\n    prevTransportState: null, // Previous transport state, used to detect changes in the transport state\n    prevPlayMedium: null, // Previous play medium, used to detect changes in the play medium\n    prevSourceIdent: null, // Previous source ident, used to detect changes in the source\n    prevTrackInfo: null // Previous track info, used to detect changes in the metadata\n};\n\n// Reference placeholders.\n// These are set in the init function\n// and are used to reference the UI elements in the app.\nWNP.r = {};\n\n/**\n * Initialisation of app.\n * @returns {undefined}\n */\nWNP.Init = function () {\n    console.log(\"WNP\", \"Initialising...\");\n\n    // Init Socket.IO, connect to port where server resides\n    console.log(\"WNP\", \"Listening on \" + this.s.locHostname + \":\" + this.s.locPort)\n    window.socket = io.connect(\":\" + this.s.locPort);\n\n    // Set references to the UI elements\n    this.setUIReferences();\n\n    // Set tick handlers\n    this.setTickHandlers();\n\n    // Set Socket.IO definitions\n    this.setSocketDefinitions();\n\n    // Set UI event listeners\n    this.setUIListeners();\n\n    // Initial calls, wait a bit for socket to start\n    setTimeout(() => {\n        // Get server settings\n        this.r.tickServerSettingsUp.classList.add(\"tickAnimate\");\n        socket.emit(\"server-settings\");\n        // Get devices\n        this.r.tickDevicesGetUp.classList.add(\"tickAnimate\");\n        socket.emit(\"devices-get\");\n        // // Get volume\n        // this.r.tickVolumeGetUp.classList.add(\"tickAnimate\");\n        // socket.emit(\"device-api\", \"getPlayerStatus\");\n        // Get presets\n        this.r.tickPresetsListUp.classList.add(\"tickAnimate\");\n        socket.emit(\"device-api\", \"getPresetInfo\");\n    }, 500);\n\n    // Create random album intervals, every 3 minutes\n    WNP.s.rndAlbumArtUri = WNP.rndAlbumArt(\"fake-album-\");\n    var rndAlbumInterval = setInterval(function () {\n        WNP.s.rndAlbumArtUri = WNP.rndAlbumArt(\"fake-album-\");\n    }, 3 * 60 * 1000);\n\n};\n\n/**\n * Reference to the UI elements of the app.\n * @returns {undefined}\n */\nWNP.setUIReferences = function () {\n    console.log(\"WNP\", \"Set UI references...\")\n\n    function addElementToRef(id) {\n        const element = document.getElementById(id);\n        if (element) {\n            WNP.r[id] = element;\n        } else {\n            console.warn(\"WNP\", `Element with ID '${id}' not found in current HTML.`);\n        }\n    }\n\n    // Set references to the UI elements\n    this.s.aDeviceUI.forEach((id) => { addElementToRef(id); });\n    this.s.aServerUI.forEach((id) => { addElementToRef(id); });\n    this.s.aTicksUI.forEach((id) => { addElementToRef(id); });\n    this.s.aDebugUI.forEach((id) => { addElementToRef(id); });\n\n};\n\n/**\n * Set the tick event handlers for the app.\n * @returns {undefined}\n */\nWNP.setTickHandlers = function () {\n\n    function removeTickAnimate(e) {\n        e.target.classList.remove(\"tickAnimate\");\n    }\n\n    // Set the tick handlers for the app\n    this.s.aTicksUI.forEach((tick) => {\n        if (this.r[tick]) {\n            this.r[tick].addEventListener(\"animationend\", removeTickAnimate);\n        } else {\n            console.warn(\"WNP\", `Element with ID '${tick}' not found.`);\n        }\n    });\n\n};\n\n/**\n * Setting the listeners on the UI elements of the app.\n * @returns {undefined}\n */\nWNP.setUIListeners = function () {\n    console.log(\"WNP\", \"Set UI Listeners...\")\n\n    // ------------------------------------------------\n    // Player buttons\n\n    // (no player buttons in debug mode)\n\n    // ------------------------------------------------\n    // Settings buttons\n\n    // Device selection dropdown\n    this.r.selDeviceChoices.addEventListener(\"change\", function () {\n        WNP.r.tickDeviceSetUp.classList.add(\"tickAnimate\");\n        socket.emit(\"device-set\", this.value);\n    });\n\n    // Devices get button\n    this.r.btnDevices.addEventListener(\"click\", function () {\n        WNP.r.tickDevicesGetUp.classList.add(\"tickAnimate\");\n        socket.emit(\"devices-get\");\n    });\n\n    // Refresh devices button\n    this.r.btnRefresh.addEventListener(\"click\", function () {\n        WNP.r.tickDevicesRefreshUp.classList.add(\"tickAnimate\");\n        socket.emit(\"devices-refresh\");\n        // Wait for discovery to finish\n        setTimeout(() => {\n            WNP.r.tickDevicesGetUp.classList.add(\"tickAnimate\");\n            socket.emit(\"devices-get\");\n            WNP.r.tickServerSettingsUp.classList.add(\"tickAnimate\");\n            socket.emit(\"server-settings\");\n            WNP.r.tickPresetsListUp.classList.add(\"tickAnimate\");\n            socket.emit(\"device-api\", \"getPresetInfo\");\n        }, 5000);\n    });\n\n    // Get volume button\n    this.r.btnGetVolume.addEventListener(\"click\", function () {\n        WNP.r.tickVolumeGetUp.classList.add(\"tickAnimate\");\n        socket.emit(\"device-api\", \"getPlayerStatus\");\n    });\n\n    // Set volume button\n    this.r.btnSetVolume.addEventListener(\"click\", function () {\n        var volume = parseInt(WNP.r.devVol.value);\n        if (isNaN(volume) || volume < 0 || volume > 100) {\n            alert(\"Please enter a valid volume between 0 and 100.\");\n            return;\n        }\n        WNP.r.tickVolumeSetUp.classList.add(\"tickAnimate\");\n        socket.emit(\"device-api\", \"setPlayerCmd:vol:\" + volume);\n    });\n\n    // Reboot button\n    this.r.btnReboot.addEventListener(\"click\", function () {\n        socket.emit(\"server-reboot\");\n    });\n\n    // Update button\n    this.r.btnUpdate.addEventListener(\"click\", function () {\n        socket.emit(\"server-update\");\n    });\n\n    // Shutdown button\n    this.r.btnShutdown.addEventListener(\"click\", function () {\n        socket.emit(\"server-shutdown\");\n    });\n\n    // Reload UI button\n    this.r.btnReloadUI.addEventListener(\"click\", function () {\n        location.reload();\n    });\n\n};\n\n/**\n * Set the socket definitions to listen for specific websocket traffic and handle accordingly.\n * @returns {undefined}\n */\nWNP.setSocketDefinitions = function () {\n    console.log(\"WNP\", \"Setting Socket definitions...\")\n\n    // On server settings\n    socket.on(\"server-settings\", function (msg) {\n        console.log(\"IO: server-settings\", msg);\n        WNP.r.tickServerSettingsDown.classList.add(\"tickAnimate\");\n\n        // Store server settings\n        WNP.d.serverSettings = msg;\n        WNP.r.sServerSettings.innerHTML = JSON.stringify(msg);\n\n        // RPi has bash, so possibly able to reboot/shutdown.\n        if (msg && msg.os && msg.os.userInfo && msg.os.userInfo.shell === \"/bin/bash\") {\n            WNP.r.btnReboot.disabled = false;\n            WNP.r.btnUpdate.disabled = false;\n            WNP.r.btnShutdown.disabled = false;\n        };\n\n        // Set device name\n        WNP.r.devName.innerText = (msg && msg.selectedDevice && msg.selectedDevice.friendlyName) ? msg.selectedDevice.friendlyName : \"-\";\n        WNP.r.sManufacturer.innerText = (msg && msg.selectedDevice && msg.selectedDevice.manufacturer) ? msg.selectedDevice.manufacturer : \"-\";\n        WNP.r.sModelName.innerText = (msg && msg.selectedDevice && msg.selectedDevice.modelName) ? msg.selectedDevice.modelName : \"-\";\n        WNP.r.sLocation.innerHTML = (msg && msg.selectedDevice && msg.selectedDevice.location) ? \"<a href=\\\"\" + msg.selectedDevice.location + \"\\\">\" + msg.selectedDevice.location + \"</a>\" : \"-\";\n\n        // Set the server local url\n        if (msg && msg.os && msg.os.hostname) {\n            var sUrl = \"http://\" + msg.os.hostname.toLowerCase() + \".local\";\n            sUrl += (location && location.port && location.port != 80) ? \":\" + location.port + \"/\" : \"/\";\n            WNP.r.sServerUrlHostname.innerHTML = \"<a href=\\\"\" + sUrl + \"\\\">\" + sUrl + \"</a>\";\n        }\n        else {\n            WNP.r.sServerUrlHostname.innerText = \"-\";\n        }\n        // Set the server ip address\n        if (msg && msg.selectedDevice && msg.selectedDevice.location && msg.os && msg.os.networkInterfaces) {\n            // Grab the ip address pattern of the selected device\n            // Assumption is that the wiim-now-playing server is on the same ip range as the client..\n            var sLocationIp = msg.selectedDevice.location.split(\"/\")[2]; // Extract ip address from location\n            var aIpAddress = sLocationIp.split(\".\"); // Split ip address in parts\n            aIpAddress.pop(); // Remove the last part\n            var sIpPattern = aIpAddress.join(\".\"); // Construct ip address pattern\n            // Search for server ip address(es) in this range...\n            Object.keys(msg.os.networkInterfaces).forEach(function (key, index) {\n                var sIpFound = msg.os.networkInterfaces[key].find(addr => addr.address.startsWith(sIpPattern))\n                if (sIpFound) {\n                    // Construct ip address and optional port\n                    var sUrl = \"http://\" + sIpFound.address;\n                    sUrl += (location && location.port && location.port != 80) ? \":\" + location.port + \"/\" : \"/\";\n                    WNP.r.sServerUrlIP.innerHTML = \"<a href=\\\"\" + sUrl + \"\\\">\" + sUrl + \"</a>\";\n                }\n            });\n        }\n        else {\n            WNP.r.sServerUrlIP.innerText = \"-\";\n        }\n\n        // Set the server version\n        WNP.r.sServerVersion.innerText = (msg && msg.version && msg.version.server) ? msg.version.server : \"-\";\n        // Set the client version\n        WNP.r.sClientVersion.innerText = (msg && msg.version && msg.version.client) ? msg.version.client : \"-\";\n\n    });\n\n    // On devices get\n    socket.on(\"devices-get\", function (msg) {\n        console.log(\"IO: devices-get\", msg);\n        WNP.r.tickDevicesGetDown.classList.add(\"tickAnimate\");\n\n        // Store and sort device list\n        WNP.d.deviceList = msg;\n        WNP.d.deviceList.sort((a, b) => { return (a.friendlyName < b.friendlyName) ? -1 : 1 });\n\n        // Clear choices\n        WNP.r.selDeviceChoices.innerHTML = \"<option value=\\\"\\\">Select a device...</em></li>\";\n\n        // Add WiiM devices\n        var devicesWiiM = WNP.d.deviceList.filter((d) => { return d.manufacturer.startsWith(\"Linkplay\") });\n        if (devicesWiiM.length > 0) {\n\n            // Device select options\n            var optGroup = document.createElement(\"optgroup\");\n            optGroup.label = \"WiiM devices\";\n            devicesWiiM.forEach((device) => {\n                var opt = document.createElement(\"option\");\n                opt.value = device.location;\n                opt.innerText = device.friendlyName;\n                opt.title = \"By \" + device.manufacturer;\n                if (WNP.d.serverSettings && WNP.d.serverSettings.selectedDevice && WNP.d.serverSettings.selectedDevice.location === device.location) {\n                    opt.setAttribute(\"selected\", \"selected\");\n                };\n                optGroup.appendChild(opt);\n            })\n            WNP.r.selDeviceChoices.appendChild(optGroup);\n        };\n\n        // Other devices\n        // Possibly removing this section in future releases.\n        var devicesOther = WNP.d.deviceList.filter((d) => { return !d.manufacturer.startsWith(\"Linkplay\") });\n        if (devicesOther.length > 0) {\n\n            // Device select dropdown options\n            var optGroup = document.createElement(\"optgroup\");\n            optGroup.label = \"Other devices\";\n            devicesOther.forEach((device) => {\n                var opt = document.createElement(\"option\");\n                opt.value = device.location;\n                opt.innerText = device.friendlyName;\n                opt.title = \"By \" + device.manufacturer;\n                if (WNP.d.serverSettings && WNP.d.serverSettings.selectedDevice && WNP.d.serverSettings.selectedDevice.location === device.location) {\n                    opt.setAttribute(\"selected\", \"selected\");\n                };\n                optGroup.appendChild(opt);\n            })\n            WNP.r.selDeviceChoices.appendChild(optGroup);\n\n        };\n\n        // No devices found\n        if (devicesWiiM.length == 0 && devicesOther.length == 0) {\n            WNP.r.selDeviceChoices.innerHTML = \"<option disabled=\\\"disabled\\\">No devices found!</em></li>\";\n        };\n\n    });\n\n    // On state\n    socket.on(\"state\", function (msg) {\n        if (!msg) { return false; }\n\n        WNP.r.tickStateDown.classList.add(\"tickAnimate\");\n        WNP.r.state.innerHTML = JSON.stringify(msg);\n\n        // Get player progress data from the state message.\n        var timeStampDiff = 0;\n        if (msg.CurrentTransportState === \"PLAYING\") {\n            timeStampDiff = (msg.stateTimeStamp && msg.metadataTimeStamp) ? Math.round((msg.stateTimeStamp - msg.metadataTimeStamp) / 1000) : 0;\n        }\n        var relTime = (msg.RelTime) ? msg.RelTime : \"00:00:00\";\n        var trackDuration = (msg.TrackDuration) ? msg.TrackDuration : \"00:00:00\";\n        WNP.r.sTimeStampDiff.innerHTML = timeStampDiff + \"s\";\n\n        // Get current player progress and set UI elements accordingly.\n        var oPlayerProgress = WNP.getPlayerProgress(relTime, trackDuration, timeStampDiff, msg.CurrentTransportState);\n        WNP.r.sPlayerProgress.innerText = JSON.stringify(oPlayerProgress);\n\n        // Device transport state or play medium changed...?\n        if (WNP.d.prevTransportState !== msg.CurrentTransportState || WNP.d.prevPlayMedium !== msg.PlayMedium) {\n            WNP.r.sTransportState.innerText = msg.CurrentTransportState;\n            WNP.r.sPlayMedium.innerText = msg.PlayMedium;\n            WNP.d.prevTransportState = msg.CurrentTransportState; // Remember the last transport state\n            WNP.d.prevPlayMedium = msg.PlayMedium; // Remember the last PlayMedium\n        }\n\n    });\n\n    // On metadata\n    socket.on(\"metadata\", function (msg) {\n        if (!msg) { return false; }\n\n        WNP.r.tickMetadataDown.classList.add(\"tickAnimate\");\n        WNP.r.metadata.innerHTML = JSON.stringify(msg);\n\n        // Source detection\n        var playMedium = (msg.PlayMedium) ? msg.PlayMedium : \"\";\n        var trackSource = (msg.TrackSource) ? msg.TrackSource : \"\";\n        var sourceIdent = WNP.getSourceIdent(playMedium, trackSource);\n        // Did the source ident change...?\n        if (sourceIdent !== WNP.d.prevSourceIdent) {\n            if (sourceIdent !== \"\") {\n                mediaSource.innerText = playMedium + \": \" + trackSource + \" (\" + sourceIdent + \")\";\n            }\n            else {\n                mediaSource.innerText = playMedium + \": \" + trackSource;\n            }\n            WNP.d.prevSourceIdent = sourceIdent; // Remember the last Source Ident\n        }\n\n        // Song Title, Subtitle, Artist, Album\n        WNP.r.mediaTitle.innerText = (msg.trackMetaData && msg.trackMetaData[\"dc:title\"]) ? msg.trackMetaData[\"dc:title\"] : \"\";\n        WNP.r.mediaSubTitle.innerText = (msg.trackMetaData && msg.trackMetaData[\"dc:subtitle\"]) ? msg.trackMetaData[\"dc:subtitle\"] : \"\";\n        WNP.r.mediaArtist.innerText = (msg.trackMetaData && msg.trackMetaData[\"upnp:artist\"]) ? msg.trackMetaData[\"upnp:artist\"] : \"\";\n        WNP.r.mediaAlbum.innerText = (msg.trackMetaData && msg.trackMetaData[\"upnp:album\"]) ? msg.trackMetaData[\"upnp:album\"] : \"\";\n\n        // Audio quality\n        var songBitrate = (msg.trackMetaData && msg.trackMetaData[\"song:bitrate\"]) ? msg.trackMetaData[\"song:bitrate\"] : \"\";\n        var songBitDepth = (msg.trackMetaData && msg.trackMetaData[\"song:format_s\"]) ? msg.trackMetaData[\"song:format_s\"] : \"\";\n        var songSampleRate = (msg.trackMetaData && msg.trackMetaData[\"song:rate_hz\"]) ? msg.trackMetaData[\"song:rate_hz\"] : \"\";\n        WNP.r.mediaBitRate.innerText = (songBitrate > 0) ? ((songBitrate > 1000) ? (songBitrate / 1000).toFixed(2) + \" mbps (\" + songBitrate + \")\" : songBitrate + \" kbps (\" + songBitrate + \")\") : \"\";\n        WNP.r.mediaBitDepth.innerText = (songBitDepth > 0) ? ((songBitDepth > 24) ? \"24 bit (\" + songBitDepth + \")\" : songBitDepth + \" bit (\" + songBitDepth + \")\") : \"\";\n        WNP.r.mediaSampleRate.innerText = (songSampleRate > 0) ? (songSampleRate / 1000).toFixed(1) + \" kHz (\" + songSampleRate + \")\" : \"\";\n\n        // Audio quality ident badge (HD/Hi-res/CD/...)\n        var songQuality = (msg.trackMetaData && msg.trackMetaData[\"song:quality\"]) ? msg.trackMetaData[\"song:quality\"] : \"\";\n        var songActualQuality = (msg.trackMetaData && msg.trackMetaData[\"song:actualQuality\"]) ? msg.trackMetaData[\"song:actualQuality\"] : \"\";\n        var qualiIdent = WNP.getQualityIdent(songQuality, songActualQuality, songBitrate, songBitDepth, songSampleRate);\n        if (qualiIdent !== \"\") {\n            WNP.r.mediaQualityIdent.innerText = qualiIdent + \" (\" + songQuality + \", \" + songActualQuality + \")\";\n        }\n        else {\n            WNP.r.mediaQualityIdent.innerText = songQuality + \", \" + songActualQuality;\n        }\n\n        // Pre-process Album Art uri, if any is available from the metadata.\n        var albumArtUriRaw = (msg.trackMetaData && msg.trackMetaData[\"upnp:albumArtURI\"]) ? msg.trackMetaData[\"upnp:albumArtURI\"] : \"\";\n        var albumArtUri = WNP.checkAlbumArtURI(albumArtUriRaw, msg.metadataTimeStamp);\n\n        // Set Album Art, only if the track changed and the URI changed\n        var trackChanged = false;\n        var currentTrackInfo = WNP.r.mediaTitle.innerText + \"|\" + WNP.r.mediaSubTitle.innerText + \"|\" + WNP.r.mediaArtist.innerText + \"|\" + WNP.r.mediaAlbum.innerText;\n        var currentAlbumArt = WNP.r.sAlbumArtUri.innerText;\n        if (WNP.d.prevTrackInfo !== currentTrackInfo) {\n            trackChanged = true;\n            WNP.d.prevTrackInfo = currentTrackInfo; // Remember the last track info\n            console.log(\"WNP\", \"Track changed:\", currentTrackInfo);\n        }\n        if (trackChanged && currentAlbumArt != albumArtUri) {\n            WNP.r.sAlbumArtUriRaw.innerText = albumArtUriRaw;\n            WNP.r.sAlbumArtUri.innerText = albumArtUri;\n        }\n\n        // Device volume\n        WNP.r.devVol.value = (msg.CurrentVolume) ? msg.CurrentVolume : \"-\"; // Set the volume on the UI\n\n        // Loop mode status\n        if (msg.LoopMode) {\n            switch (msg.LoopMode) {\n                case \"5\": // repeat-1 | shuffle\n                    WNP.r.mediaLoopMode.innerText = \"Shuffle enabled, Repeat enabled - loop once\";\n                    break;\n                case \"3\": // no repeat | shuffle\n                    WNP.r.mediaLoopMode.innerText = \"Shuffle enabled, Repeat disabled\";\n                    break;\n                case \"2\": // repeat | shuffle\n                    WNP.r.mediaLoopMode.innerText = \"Shuffle enabled, Repeat enabled - loop\";\n                    break;\n                case \"1\": // repeat-1 | no shuffle\n                    WNP.r.mediaLoopMode.innerText = \"Shuffle disabled, Repeat enabled - loop once\";\n                    break;\n                case \"0\": // repeat | no shuffle\n                    WNP.r.mediaLoopMode.innerText = \"Shuffle disabled, Repeat enabled - loop\";\n                    break;\n                default: // no repeat | no shuffle #4\n                    WNP.r.mediaLoopMode.innerText = \"Shuffle disabled, Repeat disabled\";\n            }\n        }\n        else { // Unknown, so set default\n            WNP.r.mediaLoopMode.innerText = \"Unknown\";\n        }\n\n    });\n\n    // On device set\n    socket.on(\"device-set\", function (msg) {\n        console.log(\"IO: device-set\", msg);\n        WNP.r.tickDeviceSetDown.classList.add(\"tickAnimate\");\n        // Device switch? Fetch settings and device info again.\n        WNP.r.tickServerSettingsUp.classList.add(\"tickAnimate\");\n        socket.emit(\"server-settings\");\n        WNP.r.tickDevicesGetUp.classList.add(\"tickAnimate\");\n        socket.emit(\"devices-get\");\n        WNP.r.tickVolumeGetUp.classList.add(\"tickAnimate\");\n        socket.emit(\"device-api\", \"getPlayerStatus\");\n        WNP.r.tickPresetsListUp.classList.add(\"tickAnimate\");\n        socket.emit(\"device-api\", \"getPresetInfo\");\n    });\n\n    // On device refresh\n    socket.on(\"devices-refresh\", function (msg) {\n        console.log(\"IO: devices-refresh\", msg);\n        WNP.r.tickDevicesRefreshDown.classList.add(\"tickAnimate\");\n        WNP.r.selDeviceChoices.innerHTML = \"<option disabled=\\\"disabled\\\">Waiting for devices...</em></li>\";\n    });\n\n    // On device action (i.e. for play, pause, next, previous)\n    socket.on(\"device-action\", function (msg, param) {\n        // Actions do not return a message.\n        // so we don't need to do anything here.\n        // Maybe later we can use this to show a notification or similar.\n        console.log(\"WNP\", \"Action:\", msg);\n    });\n\n    // On device API response\n    socket.on(\"device-api\", function (msg, param) {\n        console.log(\"IO: device-api\", msg, param);\n        switch (msg) {\n            case \"getPresetInfo\":\n                // Preset info response\n                WNP.r.tickPresetsListDown.classList.add(\"tickAnimate\");\n                WNP.r.sPresetsList.innerHTML = param ? JSON.stringify(param) : \"\";\n                var sCurrentTitle = WNP.r.mediaTitle.innerText;\n                var sCurrentSubtitle = WNP.r.mediaSubTitle.innerText;\n                // Update preset buttons\n                if (WNP.r.oPresetsGroup) {\n                    WNP.r.oPresetsGroup.innerHTML = \"\";\n                    if (param && param.preset_list && param.preset_list.length > 0) {\n                        param.preset_list.forEach((preset) => {\n                            var btn = document.createElement(\"button\");\n                            btn.type = \"button\";\n                            btn.classList = \"btn btn-secondary\";\n                            btn.innerText = preset.number;\n                            btn.title = preset.name;\n                            if (preset.name === sCurrentTitle || preset.name === sCurrentSubtitle) {\n                                btn.classList.add(\"active\");\n                            }\n                            btn.addEventListener(\"click\", function () {\n                                // Load preset\n                                socket.emit(\"device-api\", \"MCUKeyShortClick:\" + preset.number);\n                                // Highlight button\n                                Array.from(WNP.r.oPresetsGroup.children).forEach((b) => { b.classList.remove(\"active\"); });\n                                btn.classList.add(\"active\");\n                            });\n                            WNP.r.oPresetsGroup.appendChild(btn);\n                        });\n                    } else {\n                        var p = document.createElement(\"p\");\n                        p.classList = \"form-text text-white\";\n                        p.innerText = \"No presets found\";\n                        WNP.r.oPresetsGroup.appendChild(p);\n                    }\n                }\n                break;\n            case msg.startsWith(\"MCUKeyShortClick:\") ? msg : false:\n                // Preset set response, no further action needed\n                break;\n            case \"getPlayerStatus\":\n                // Player status response\n                // Called when getting volume\n                WNP.r.tickVolumeGetDown.classList.add(\"tickAnimate\");\n                if (param && param.vol !== undefined) {\n                    WNP.r.devVol.value = param.vol;\n                }\n                break;\n            case msg.startsWith(\"setPlayerCmd:vol:\") ? msg : false:\n                // Volume set response\n                WNP.r.tickVolumeSetDown.classList.add(\"tickAnimate\");\n                socket.emit(\"device-api\", \"getPlayerStatus\"); // Refresh volume UI\n                break;\n            default:\n                // No action\n                break;\n        }\n    });\n\n    // On server reboot\n    socket.on(\"server-reboot\", function (msg) {\n        // Possibly show a notification that reboot is in progress\n        console.log(\"WNP\", \"Server reboot:\", msg);\n    });\n\n    // On server update\n    socket.on(\"server-update\", function (msg) {\n        // Possibly show a notification that update is in progress\n        console.log(\"WNP\", \"Server update:\", msg);\n    });\n\n    // On server shutdown\n    socket.on(\"server-shutdown\", function (msg) {\n        // Possibly show a notification that shutdown is in progress\n        console.log(\"WNP\", \"Server shutdown:\", msg);\n    });\n\n};\n\n// =======================================================\n// Helper functions\n\n/**\n * Get player progress helper.\n * @param {string} relTime - Time elapsed while playing, format 00:00:00\n * @param {string} trackDuration - Total play time, format 00:00:00\n * @param {integer} timeStampDiff - Possible play time offset in seconds\n * @param {string} currentTransportState - The current transport state \"PLAYING\" or otherwise\n * @returns {object} An object with corrected played, left, total and percentage played\n */\nWNP.getPlayerProgress = function (relTime, trackDuration, timeStampDiff, currentTransportState) {\n    var relTimeSec = this.convertToSeconds(relTime) + timeStampDiff;\n    var trackDurationSec = this.convertToSeconds(trackDuration);\n    if (trackDurationSec > 0 && relTimeSec < trackDurationSec) {\n        var percentPlayed = ((relTimeSec / trackDurationSec) * 100).toFixed(1);\n        return {\n            played: WNP.convertToMinutes(relTimeSec),\n            left: WNP.convertToMinutes(trackDurationSec - relTimeSec),\n            total: WNP.convertToMinutes(trackDurationSec),\n            percent: percentPlayed\n        };\n    }\n    else if (trackDurationSec == 0 && currentTransportState == \"PLAYING\") {\n        return {\n            played: \"Live\",\n            left: \"\",\n            total: \"\",\n            percent: 100\n        };\n    }\n    else {\n        return {\n            played: \"Paused\",\n            left: \"\",\n            total: \"\",\n            percent: 0\n        };\n    };\n};\n\n/**\n * Convert time format '00:00:00' to total number of seconds.\n * @param {string} sDuration - Time, format 00:00:00.\n * @returns {integer} The number of seconds that the string represents.\n */\nWNP.convertToSeconds = function (sDuration) {\n    const timeSections = sDuration.split(\":\");\n    let totalSeconds = 0;\n    for (let i = 0; i < timeSections.length; i++) {\n        var nFactor = timeSections.length - 1 - i; // Count backwards\n        var nMultiplier = Math.pow(60, nFactor); // 60^n\n        totalSeconds += nMultiplier * parseInt(timeSections[i]); // Calculate the seconds\n    }\n    return totalSeconds\n};\n\n/**\n * Convert number of seconds to '00:00' string format. \n * Sorry for those hour+ long songs...\n * @param {integer} seconds - Number of seconds total.\n * @returns {string} The string representation of seconds in minutes, format 00:00.\n */\nWNP.convertToMinutes = function (seconds) {\n    var tempDate = new Date(0);\n    tempDate.setSeconds(seconds);\n    var result = tempDate.toISOString().substring(14, 19);\n    return result;\n};\n\n/**\n * Check if the album art is a valid URI. Returns the URI if valid, otherwise a random URI.\n * This function creates a virtual image element to check if the album art URI is valid.\n * @param {string} sAlbumArtUri - The URI of the album art.\n * @param {integer} nTimestamp - The time in milliseconds, used as cache buster.\n * @returns {string} The URI of the album art.\n */\nWNP.checkAlbumArtURI = function (sAlbumArtUri, nTimestamp) {\n\n    // Create a virtual image element to check the album art URI behind the scenes\n    var img = new Image();\n    // On successful load\n    img.onload = function () {\n        console.log(\"WNP\", \"Album art loaded successfully.\", \"Size: \" + this.width + \"x\" + this.height + \"px\");\n        WNP.r.sAlbumArtUriStatus.classList = \"bi bi-check-circle-fill\";\n        WNP.r.sAlbumArtUriStatus.title = \"Able to load album art\";\n    };\n    // On error loading the image\n    img.onerror = function () {\n        console.error(\"WNP\", \"Failed to load album art:\", sAlbumArtUri);\n        WNP.r.sAlbumArtUriStatus.classList = \"bi bi-x-circle-fill\";\n        WNP.r.sAlbumArtUriStatus.title = \"Unable to load album art\";\n    };\n\n    // If the URI starts with https, the self signed certificate may not trusted by the browser.\n    // Hence we always try and load the image through a reverse proxy, ignoring the certificate.\n    if (sAlbumArtUri && sAlbumArtUri.startsWith(\"https\")) {\n        var sAlbumArtProxyUri = \"\";\n        if (WNP.s.locPort != \"80\") { // If the server is not running on port 80, we need to add the port to the URI\n            sAlbumArtProxyUri = \"http://\" + WNP.s.locHostname + \":\" + WNP.s.locPort + \"/proxy-art?url=\" + encodeURIComponent(sAlbumArtUri) + \"&ts=\" + nTimestamp; // Use the current timestamp as cache buster\n        } else {\n            sAlbumArtProxyUri = \"http://\" + WNP.s.locHostname + \"/proxy-art?url=\" + encodeURIComponent(sAlbumArtUri) + \"&ts=\" + nTimestamp; // Use the current timestamp as cache buster\n        }\n        img.src = sAlbumArtProxyUri; // Test loading the image through the proxy\n        return sAlbumArtProxyUri;\n    } else if (sAlbumArtUri && sAlbumArtUri.startsWith(\"http\")) {\n        img.src = sAlbumArtUri; // Test loading the image directly\n        return sAlbumArtUri;\n    } else {\n        // Looks like an invalid/un_known album art, use the fallback.\n        WNP.r.sAlbumArtUriStatus.classList = \"bi bi-exclamation-circle-fill\";\n        WNP.r.sAlbumArtUriStatus.title = \"Falling back to random album art\";\n        return WNP.s.rndAlbumArtUri;\n    }\n};\n\n/**\n * Come up with a random album art URI (locally from the img folder).\n * @param {string} prefix - The prefix for the album art URI, i.e. 'fake-album-'\n * @returns {string} An URI for album art\n */\nWNP.rndAlbumArt = function (prefix) {\n    return \"./img/\" + prefix + this.rndNumber(1, 16) + \".jpg\";\n};\n\n/**\n * Get a random number between min and max, including min and max.\n * @param {integer} min - Minimum number to pick, keep it lower than max.\n * @param {integer} max - Maximum number to pick.\n * @returns {integer} The random number\n */\nWNP.rndNumber = function (min, max) {\n    return Math.floor(Math.random() * (max - min + 1)) + min;\n};\n\n/**\n * Get an identifier for the current play medium combined with the tracksource.\n * TODO: Verify all/most sources...\n * @param {string} playMedium - The PlayMedium as indicated by the device. Values: SONGLIST-NETWORK, RADIO-NETWORK, STATION-NETWORK, CAST, AIRPLAY, SPOTIFY, UNKOWN\n * @param {string} trackSource - The stream source as indicated by the device. Values: Prime, Qobuz, SPOTIFY, newTuneIn, iHeartRadio, Deezer, UPnPServer, Tidal, vTuner\n * @returns {string} The uri to the source identifier (image url)\n */\nWNP.getSourceIdent = function (playMedium, trackSource) {\n\n    var sIdentUri = \"\";\n\n    switch (playMedium.toLowerCase()) {\n        case \"airplay\":\n            sIdentUri = \"./img/sources/airplay2.png\";\n            break;\n        case \"third-dlna\":\n            sIdentUri = \"./img/sources/dlna2.png\";\n            break;\n        case \"cast\":\n            sIdentUri = \"./img/sources/chromecast2.png\";\n            break;\n        case \"radio-network\":\n            sIdentUri = \"./img/sources/radio.png\";\n            break;\n        case \"songlist-network\":\n            sIdentUri = \"./img/sources/ethernet2.png\";\n            break;\n        case \"spotify\":\n            sIdentUri = \"./img/sources/spotify.png\";\n            break;\n        case \"squeezelite\":\n            sIdentUri = \"./img/sources/music-assistant2.png\";\n            break;\n        case \"none\":\n            sIdentUri = \"./img/sources/none2.png\";\n            break;\n        case \"bluetooth\":\n            sIdentUri = \"./img/sources/bluetooth2.png\";\n            break;\n        case \"hdmi\":\n            sIdentUri = \"./img/sources/hdmi2.png\";\n            break;\n        case \"line-in\":\n            sIdentUri = \"./img/sources/line-in2.png\";\n            break;\n        case \"optical\":\n            sIdentUri = \"./img/sources/spdif2.png\";\n            break;\n    };\n\n    switch (trackSource.toLowerCase()) {\n        case \"deezer\":\n        case \"deezer2\":\n            sIdentUri = \"./img/sources/deezer.png\";\n            break;\n        case \"iheartradio\":\n            sIdentUri = \"./img/sources/iheart.png\";\n            break;\n        case \"newtunein\":\n            sIdentUri = \"./img/sources/newtunein.png\";\n            break;\n        case \"plex\":\n            sIdentUri = \"./img/sources/plex.png\";\n            break;\n        case \"prime\":\n            sIdentUri = \"./img/sources/amazon-music2.png\";\n            break;\n        case \"qobuz\":\n            sIdentUri = \"./img/sources/qobuz2.png\";\n            break;\n        case \"tidal\":\n            sIdentUri = \"./img/sources/tidal2.png\";\n            break;\n        case \"upnpserver\":\n            sIdentUri = \"./img/sources/dlna2.png\";\n            break;\n        case \"vtuner\":\n            sIdentUri = \"./img/sources/vtuner2.png\";\n            break;\n    };\n\n    return sIdentUri;\n\n};\n\n/**\n * Get an identifier for the current audio/song quality.\n * TODO: Verify all/most sources...\n * Found so far:\n * \n * CD Quality: 44.1 KHz/16 bit. Bitrate 1,411 kbps. For mp3 bitrate can vary, but also be 320/192/160/128/... kbps.\n * Hi-Res quality: 96 kHz/24 bit and up. Bitrate 9,216 kbps.\n * \n * Spotify Lossless: bitrate 700 kbps, 44.1 kHz/24 bit\n * Spotify and Pandora usual bitrate 160 kbps, premium is 320 kbps\n * Tidal has CD quality, and FLAC, MQA, Master, ...\n * Qobuz apparently really has hi-res?\n * Amazon Music (Unlimited) does Atmos?\n * Apple Music -> Airplay 2, does hi-res?\n * YouTube Music -> Cast, does what?\n * \n * TIDAL -\n * Sample High: \"song:quality\":\"2\",\"song:actualQuality\":\"LOSSLESS\"\n * Sample MQA: \"song:quality\":\"3\",\"song:actualQuality\":\"HI_RES\"\n * Sample FLAC: \"song:quality\":\"4\",\"song:actualQuality\":\"HI_RES_LOSSLESS\"\n * \n * @param {integer} songQuality - A number identifying the quality, as indicated by the streaming service(?).\n * @param {string} songActualQuality - An indicator for the actual quality, as indicated by the streaming service(?).\n * @param {integer} songBitrate - The current bitrate in kilobit per second.\n * @param {integer} songBitDepth - The current sample depth in bits.\n * @param {integer} songSampleRate - The current sample rate in Hz.\n * @returns {string} The identifier for the audio quality, just a string.\n */\nWNP.getQualityIdent = function (songQuality, songActualQuality, songBitrate, songBitDepth, songSampleRate) {\n    // console.log(songQuality, songActualQuality, songBitrate, songBitDepth, songSampleRate);\n\n    var sIdent = \"\";\n\n    if (songBitrate >= 700 && songBitDepth == 24 && songSampleRate == 44100) {\n        sIdent = \"Lossless\";\n    }\n    if (songBitrate > 1000 && songBitDepth == 16 && songSampleRate == 44100) {\n        sIdent = \"CD\";\n    }\n    else if (songBitrate > 7000 && songBitDepth >= 24 && songSampleRate >= 96000) {\n        sIdent = \"Hi-Res\";\n    }\n\n    // Based of Tidal/Amazon Music Unlimited/Deezer/Qobuz\n    switch (songQuality + \":\" + songActualQuality) {\n        case \"2:LOSSLESS\": // Tidal\n        case \":LOSSLESS\": // Tidal\n            sIdent = \"HIGH\";\n            break;\n        case \"3:HI_RES\": // Tidal\n            sIdent = \"MQA\";\n            break;\n        case \"4:HI_RES_LOSSLESS\": // Tidal\n        case \":HI_RES_LOSSLESS\": // Tidal\n        case \"0:LOSSLESS\": // Deezer\n            sIdent = \"FLAC\";\n            break;\n        case \":UHD\": // Amazon Music\n            sIdent = \"ULTRA HD\";\n            break;\n        case \":HD\":\n            sIdent = \"HD\"; // Amazon Music\n            break;\n        case \"3:7\":\n        case \"4:27\":\n            sIdent = \"Hi-Res\"; // Qobuz\n            break;\n        case \"2:6\":\n            sIdent = \"CD\"; // Qobuz\n            break;\n    };\n\n    return sIdent;\n\n};\n\n// =======================================================\n// Start WiiM Now Playing app debugger\nWNP.Init();\n"],"names":["window","WNP","s","locHostname","location","hostname","locPort","port","rndAlbumArtUri","aDeviceUI","aServerUI","aTicksUI","aDebugUI","d","serverSettings","deviceList","prevTransportState","prevPlayMedium","prevSourceIdent","prevTrackInfo","r","Init","console","log","socket","io","connect","setUIReferences","setTickHandlers","setSocketDefinitions","setUIListeners","setTimeout","tickServerSettingsUp","classList","add","emit","tickDevicesGetUp","tickPresetsListUp","rndAlbumArt","setInterval","addElementToRef","id","element","document","getElementById","warn","forEach","removeTickAnimate","e","target","remove","tick","addEventListener","selDeviceChoices","tickDeviceSetUp","value","btnDevices","btnRefresh","tickDevicesRefreshUp","btnGetVolume","tickVolumeGetUp","btnSetVolume","volume","parseInt","devVol","isNaN","alert","tickVolumeSetUp","btnReboot","btnUpdate","btnShutdown","btnReloadUI","reload","on","msg","tickServerSettingsDown","sServerSettings","innerHTML","JSON","stringify","os","userInfo","shell","disabled","devName","innerText","selectedDevice","friendlyName","sManufacturer","manufacturer","sModelName","modelName","sLocation","sUrl","toLowerCase","sServerUrlHostname","networkInterfaces","aIpAddress","sLocationIp","split","pop","sIpPattern","join","Object","keys","key","index","sIpFound","find","addr","address","startsWith","sServerUrlIP","sServerVersion","version","server","sClientVersion","client","tickDevicesGetDown","sort","a","b","devicesWiiM","filter","length","optGroup","createElement","label","device","opt","title","setAttribute","appendChild","devicesOther","tickStateDown","state","timeStampDiff","CurrentTransportState","stateTimeStamp","metadataTimeStamp","Math","round","relTime","RelTime","trackDuration","TrackDuration","sTimeStampDiff","oPlayerProgress","getPlayerProgress","sPlayerProgress","PlayMedium","sTransportState","sPlayMedium","tickMetadataDown","metadata","playMedium","trackSource","TrackSource","sourceIdent","getSourceIdent","mediaSource","mediaTitle","trackMetaData","mediaSubTitle","mediaArtist","mediaAlbum","songBitrate","songBitDepth","songSampleRate","mediaBitRate","toFixed","mediaBitDepth","mediaSampleRate","songQuality","songActualQuality","qualiIdent","getQualityIdent","mediaQualityIdent","albumArtUriRaw","albumArtUri","checkAlbumArtURI","trackChanged","currentTrackInfo","currentAlbumArt","sAlbumArtUri","sAlbumArtUriRaw","CurrentVolume","LoopMode","mediaLoopMode","tickDeviceSetDown","tickDevicesRefreshDown","param","tickPresetsListDown","sPresetsList","sCurrentTitle","sCurrentSubtitle","oPresetsGroup","preset_list","preset","btn","type","number","name","Array","from","children","p","tickVolumeGetDown","undefined","vol","tickVolumeSetDown","currentTransportState","relTimeSec","convertToSeconds","trackDurationSec","percentPlayed","played","convertToMinutes","left","total","percent","sDuration","timeSections","totalSeconds","i","nMultiplier","pow","seconds","tempDate","Date","setSeconds","toISOString","substring","nTimestamp","img","Image","onload","width","height","sAlbumArtUriStatus","onerror","error","sAlbumArtProxyUri","src","encodeURIComponent","prefix","rndNumber","min","max","floor","random","sIdentUri","sIdent"],"version":3,"file":"debug.5fba14c8.js.map"}