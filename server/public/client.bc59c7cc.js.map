{"mappings":"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","sources":["<anon>","src/js/wnp.js"],"sourcesContent":["var $2adbdd4d4d2317fc$exports = {};\n// =======================================================\n// WiiM Now Playing\n// Namespacing\nwindow.WNP = window.WNP || {};\n// Default settings\nWNP.s = {\n    // Host runs on default port 80, but in cases where another port is chosen adapt\n    locHostname: location.hostname,\n    locPort: location.port && location.port != \"80\" && location.port != \"1234\" ? location.port : \"80\",\n    rndAlbumArtUri: \"./img/fake-album-1.jpg\",\n    // Device selection\n    aDeviceUI: [\n        \"btnPrev\",\n        \"btnPlay\",\n        \"btnNext\",\n        \"btnRefresh\",\n        \"selDeviceChoices\",\n        \"devName\",\n        \"devNameHolder\",\n        \"mediaTitle\",\n        \"mediaSubTitle\",\n        \"mediaArtist\",\n        \"mediaAlbum\",\n        \"mediaBitRate\",\n        \"mediaBitDepth\",\n        \"mediaSampleRate\",\n        \"mediaQualityIdent\",\n        \"devVol\",\n        \"btnRepeat\",\n        \"btnShuffle\",\n        \"progressPlayed\",\n        \"progressLeft\",\n        \"progressPercent\",\n        \"mediaSource\",\n        \"albumArt\",\n        \"bgAlbumArtBlur\",\n        \"btnDevSelect\",\n        \"oDeviceList\",\n        \"btnDevPreset\",\n        \"oPresetList\",\n        \"btnDevVolume\",\n        \"rVolume\"\n    ],\n    // Server actions to be used in the app\n    aServerUI: [\n        \"btnReboot\",\n        \"btnUpdate\",\n        \"btnShutdown\",\n        \"btnReloadUI\",\n        \"sServerUrlHostname\",\n        \"sServerUrlIP\",\n        \"sServerVersion\",\n        \"sClientVersion\"\n    ]\n};\n// Data placeholders.\nWNP.d = {\n    serverSettings: null,\n    deviceList: null,\n    prevTransportState: null,\n    prevPlayMedium: null,\n    prevSourceIdent: null,\n    prevTrackInfo: null // Previous track info, used to detect changes in the metadata\n};\n// Reference placeholders.\n// These are set in the init function\n// and are used to reference the UI elements in the app.\nWNP.r = {};\n/**\n * Initialisation of app.\n * @returns {undefined}\n */ WNP.Init = function() {\n    console.log(\"WNP\", \"Initialising...\");\n    // Init Socket.IO, connect to port where server resides\n    console.log(\"WNP\", \"Listening on \" + this.s.locHostname + \":\" + this.s.locPort);\n    window.socket = io.connect(\":\" + this.s.locPort);\n    // Set references to the UI elements\n    this.setUIReferences();\n    // Set Socket.IO definitions\n    this.setSocketDefinitions();\n    // Set UI event listeners\n    this.setUIListeners();\n    // Initial calls, wait a bit for socket to start\n    setTimeout(()=>{\n        // Get server settings\n        socket.emit(\"server-settings\");\n        // Get devices\n        socket.emit(\"devices-get\");\n    }, 500);\n    // Create random album intervals, every 3 minutes\n    WNP.s.rndAlbumArtUri = WNP.rndAlbumArt(\"fake-album-\");\n    var rndAlbumInterval = setInterval(function() {\n        WNP.s.rndAlbumArtUri = WNP.rndAlbumArt(\"fake-album-\");\n    }, 180000);\n};\n/**\n * Reference to the UI elements of the app.\n * @returns {undefined}\n */ WNP.setUIReferences = function() {\n    console.log(\"WNP\", \"Set UI references...\");\n    function addElementToRef(id) {\n        const element = document.getElementById(id);\n        if (element) WNP.r[id] = element;\n        else console.log(\"WNP\", `Element with ID '${id}' not found in current HTML.`);\n    }\n    // Set references to the UI elements\n    this.s.aDeviceUI.forEach((id)=>{\n        addElementToRef(id);\n    });\n    this.s.aServerUI.forEach((id)=>{\n        addElementToRef(id);\n    });\n};\n/**\n * Setting the listeners on the UI elements of the app.\n * @returns {undefined}\n */ WNP.setUIListeners = function() {\n    console.log(\"WNP\", \"Set UI Listeners...\");\n    // ------------------------------------------------\n    // Player buttons\n    // Previous button\n    this.r.btnPrev.addEventListener(\"click\", function() {\n        var wnpAction = this.getAttribute(\"wnp-action\");\n        if (wnpAction) {\n            this.disabled = true;\n            socket.emit(\"device-action\", wnpAction);\n        }\n    });\n    // Play/Pause/Stop button\n    this.r.btnPlay.addEventListener(\"click\", function() {\n        var wnpAction = this.getAttribute(\"wnp-action\");\n        if (wnpAction) {\n            this.disabled = true;\n            socket.emit(\"device-action\", wnpAction);\n        }\n    });\n    // Next button\n    this.r.btnNext.addEventListener(\"click\", function() {\n        var wnpAction = this.getAttribute(\"wnp-action\");\n        if (wnpAction) {\n            this.disabled = true;\n            socket.emit(\"device-action\", wnpAction);\n        }\n    });\n    // ------------------------------------------------\n    // Device control inputs (only for default GUI, not TV mode)\n    // Device select button\n    if (this.r.btnDevPreset) this.r.btnDevPreset.addEventListener(\"click\", function() {\n        socket.emit(\"device-api\", \"getPresetInfo\");\n    });\n    // Device volume range input\n    if (this.r.rVolume) this.r.rVolume.addEventListener('input', function() {\n        if (!isNaN(this.value) && this.value >= 0 && this.value <= 100) socket.emit(\"device-api\", \"setPlayerCmd:vol:\" + this.value);\n    });\n    // ------------------------------------------------\n    // Settings buttons\n    // Device selection dropdown\n    this.r.selDeviceChoices.addEventListener(\"change\", function() {\n        socket.emit(\"device-set\", this.value);\n    });\n    // Refresh devices button\n    this.r.btnRefresh.addEventListener(\"click\", function() {\n        socket.emit(\"devices-refresh\");\n        // Wait for discovery to finish\n        setTimeout(()=>{\n            socket.emit(\"devices-get\");\n            socket.emit(\"server-settings\");\n        }, 5000);\n    });\n    // Reboot button\n    this.r.btnReboot.addEventListener(\"click\", function() {\n        socket.emit(\"server-reboot\");\n    });\n    // Update button\n    this.r.btnUpdate.addEventListener(\"click\", function() {\n        socket.emit(\"server-update\");\n    });\n    // Shutdown button\n    this.r.btnShutdown.addEventListener(\"click\", function() {\n        socket.emit(\"server-shutdown\");\n    });\n    // Reload UI button\n    this.r.btnReloadUI.addEventListener(\"click\", function() {\n        location.reload();\n    });\n};\n/**\n * Set the socket definitions to listen for specific websocket traffic and handle accordingly.\n * @returns {undefined}\n */ WNP.setSocketDefinitions = function() {\n    console.log(\"WNP\", \"Setting Socket definitions...\");\n    // On server settings\n    socket.on(\"server-settings\", function(msg) {\n        // Store server settings\n        WNP.d.serverSettings = msg;\n        // RPi has bash, so possibly able to reboot/shutdown.\n        if (msg && msg.os && msg.os.userInfo && msg.os.userInfo.shell === \"/bin/bash\") {\n            WNP.r.btnReboot.disabled = false;\n            WNP.r.btnUpdate.disabled = false;\n            WNP.r.btnShutdown.disabled = false;\n        }\n        // Set device name\n        WNP.r.devName.innerText = msg && msg.selectedDevice && msg.selectedDevice.friendlyName ? msg.selectedDevice.friendlyName : \"-\";\n        // Set the server local url\n        if (msg && msg.os && msg.os.hostname) {\n            var sUrl = \"http://\" + msg.os.hostname.toLowerCase() + \".local\";\n            sUrl += location && location.port && location.port != 80 ? \":\" + location.port + \"/\" : \"/\";\n            WNP.r.sServerUrlHostname.innerHTML = \"<a href=\\\"\" + sUrl + \"\\\">\" + sUrl + \"</a>\";\n        } else WNP.r.sServerUrlHostname.innerText = \"-\";\n        // Set the server ip address\n        if (msg && msg.selectedDevice && msg.selectedDevice.location && msg.os && msg.os.networkInterfaces) {\n            // Grab the ip address pattern of the selected device\n            // Assumption is that the wiim-now-playing server is on the same ip range as the client..\n            var sLocationIp = msg.selectedDevice.location.split(\"/\")[2]; // Extract ip address from location\n            var aIpAddress = sLocationIp.split(\".\"); // Split ip address in parts\n            aIpAddress.pop(); // Remove the last part\n            var sIpPattern = aIpAddress.join(\".\"); // Construct ip address pattern\n            // Search for server ip address(es) in this range...\n            Object.keys(msg.os.networkInterfaces).forEach(function(key, index) {\n                var sIpFound = msg.os.networkInterfaces[key].find((addr)=>addr.address.startsWith(sIpPattern));\n                if (sIpFound) {\n                    // Construct ip address and optional port\n                    var sUrl = \"http://\" + sIpFound.address;\n                    sUrl += location && location.port && location.port != 80 ? \":\" + location.port + \"/\" : \"/\";\n                    WNP.r.sServerUrlIP.innerHTML = \"<a href=\\\"\" + sUrl + \"\\\">\" + sUrl + \"</a>\";\n                }\n            });\n        } else WNP.r.sServerUrlIP.innerText = \"-\";\n        // Set the server version\n        WNP.r.sServerVersion.innerText = msg && msg.version && msg.version.server ? msg.version.server : \"-\";\n        // Set the client version\n        WNP.r.sClientVersion.innerText = msg && msg.version && msg.version.client ? msg.version.client : \"-\";\n    });\n    // On devices get\n    socket.on(\"devices-get\", function(msg) {\n        // Store and sort device list\n        WNP.d.deviceList = msg;\n        WNP.d.deviceList.sort((a, b)=>{\n            return a.friendlyName < b.friendlyName ? -1 : 1;\n        });\n        // Clear choices\n        WNP.r.selDeviceChoices.innerHTML = \"<option value=\\\"\\\">Select a device...</em></li>\"; // Settings modal\n        if (WNP.r.oDeviceList) WNP.r.oDeviceList.innerHTML = \"\"; // Device dropup\n        // Add WiiM devices\n        var devicesWiiM = WNP.d.deviceList.filter((d)=>{\n            return d.manufacturer.startsWith(\"Linkplay\");\n        });\n        if (devicesWiiM.length > 0) {\n            // Device select options\n            var optGroup = document.createElement(\"optgroup\");\n            optGroup.label = \"WiiM devices\";\n            devicesWiiM.forEach((device)=>{\n                var opt = document.createElement(\"option\");\n                opt.value = device.location;\n                opt.innerText = device.friendlyName;\n                opt.title = \"By \" + device.manufacturer;\n                if (WNP.d.serverSettings && WNP.d.serverSettings.selectedDevice && WNP.d.serverSettings.selectedDevice.location === device.location) opt.setAttribute(\"selected\", \"selected\");\n                optGroup.appendChild(opt);\n            });\n            WNP.r.selDeviceChoices.appendChild(optGroup);\n            // Device dropup\n            if (WNP.r.oDeviceList) devicesWiiM.forEach((device)=>{\n                var ddItem = document.createElement(\"li\");\n                var ddItemA = document.createElement(\"a\");\n                ddItemA.className = \"dropdown-item\";\n                ddItemA.href = \"javascript:WNP.setDeviceByLocation('\" + device.location + \"');\";\n                ddItemA.innerText = device.friendlyName;\n                if (WNP.d.serverSettings && WNP.d.serverSettings.selectedDevice && WNP.d.serverSettings.selectedDevice.location === device.location) {\n                    ddItemA.classList.add(\"active\");\n                    ddItemA.setAttribute(\"aria-current\", \"true\");\n                }\n                ddItem.appendChild(ddItemA);\n                WNP.r.oDeviceList.appendChild(ddItem);\n            });\n        }\n        // Other devices\n        // Possibly removing this section in future releases.\n        var devicesOther = WNP.d.deviceList.filter((d)=>{\n            return !d.manufacturer.startsWith(\"Linkplay\");\n        });\n        if (devicesOther.length > 0) {\n            // Device select dropdown options\n            var optGroup = document.createElement(\"optgroup\");\n            optGroup.label = \"Other devices\";\n            devicesOther.forEach((device)=>{\n                var opt = document.createElement(\"option\");\n                opt.value = device.location;\n                opt.innerText = device.friendlyName;\n                opt.title = \"By \" + device.manufacturer;\n                if (WNP.d.serverSettings && WNP.d.serverSettings.selectedDevice && WNP.d.serverSettings.selectedDevice.location === device.location) opt.setAttribute(\"selected\", \"selected\");\n                optGroup.appendChild(opt);\n            });\n            WNP.r.selDeviceChoices.appendChild(optGroup);\n        // Device dropup\n        // We won't show non-WiiM devices in the dropup for now.\n        }\n        // No devices found\n        if (devicesWiiM.length == 0 && devicesOther.length == 0) {\n            WNP.r.selDeviceChoices.innerHTML = \"<option disabled=\\\"disabled\\\">No devices found!</em></li>\";\n            if (WNP.r.oDeviceList) WNP.r.oDeviceList.innerHTML = \"<li><span class=\\\"dropdown-header\\\">No devices found!</span></li>\";\n        }\n    });\n    // On state\n    socket.on(\"state\", function(msg) {\n        if (!msg) return false;\n        // Get player progress data from the state message.\n        var timeStampDiff = 0;\n        if (msg.CurrentTransportState === \"PLAYING\") timeStampDiff = msg.stateTimeStamp && msg.metadataTimeStamp ? Math.round((msg.stateTimeStamp - msg.metadataTimeStamp) / 1000) : 0;\n        var relTime = msg.RelTime ? msg.RelTime : \"00:00:00\";\n        var trackDuration = msg.TrackDuration ? msg.TrackDuration : \"00:00:00\";\n        // Get current player progress and set UI elements accordingly.\n        var oPlayerProgress = WNP.getPlayerProgress(relTime, trackDuration, timeStampDiff, msg.CurrentTransportState);\n        WNP.r.progressPlayed.children[0].innerText = oPlayerProgress.played;\n        WNP.r.progressLeft.children[0].innerText = oPlayerProgress.left != \"\" ? \"-\" + oPlayerProgress.left : \"\";\n        WNP.r.progressPercent.setAttribute(\"aria-valuenow\", oPlayerProgress.percent);\n        WNP.r.progressPercent.children[0].setAttribute(\"style\", \"width:\" + oPlayerProgress.percent + \"%\");\n        // Device transport state or play medium changed...?\n        if (WNP.d.prevTransportState !== msg.CurrentTransportState || WNP.d.prevPlayMedium !== msg.PlayMedium) {\n            if (msg.CurrentTransportState === \"TRANSITIONING\") {\n                WNP.r.btnPlay.children[0].className = \"bi bi-circle-fill\";\n                WNP.r.btnPlay.disabled = true;\n            }\n            if (msg.CurrentTransportState === \"PLAYING\") {\n                // Radio live streams are preferrentialy stopped as pausing keeps cache for minutes/hours(?).\n                // Stop > Play resets the stream to 'now'. Pause works like 'live tv time shift'.\n                if (msg.PlayMedium && msg.PlayMedium === \"RADIO-NETWORK\") {\n                    WNP.r.btnPlay.children[0].className = \"bi bi-stop-circle-fill\";\n                    WNP.r.btnPlay.setAttribute(\"wnp-action\", \"Stop\");\n                } else {\n                    WNP.r.btnPlay.children[0].className = \"bi bi-pause-circle-fill\";\n                    WNP.r.btnPlay.setAttribute(\"wnp-action\", \"Pause\");\n                }\n                WNP.r.btnPlay.disabled = false;\n            } else if (msg.CurrentTransportState === \"PAUSED_PLAYBACK\" || msg.CurrentTransportState === \"STOPPED\") {\n                WNP.r.btnPlay.children[0].className = \"bi bi-play-circle-fill\";\n                WNP.r.btnPlay.setAttribute(\"wnp-action\", \"Play\");\n                WNP.r.btnPlay.disabled = false;\n            }\n            WNP.d.prevTransportState = msg.CurrentTransportState; // Remember the last transport state\n            WNP.d.prevPlayMedium = msg.PlayMedium; // Remember the last PlayMedium\n        }\n        // If internet radio, there is no skipping... just start and stop!\n        if (msg.PlayMedium && msg.PlayMedium === \"RADIO-NETWORK\") {\n            WNP.r.btnPrev.disabled = true;\n            WNP.r.btnNext.disabled = true;\n        } else {\n            WNP.r.btnPrev.disabled = false;\n            WNP.r.btnNext.disabled = false;\n        }\n    });\n    // On metadata\n    socket.on(\"metadata\", function(msg) {\n        if (!msg) return false;\n        // Source detection\n        var playMedium = msg.PlayMedium ? msg.PlayMedium : \"\";\n        var trackSource = msg.TrackSource ? msg.TrackSource : \"\";\n        var sourceIdent = WNP.getSourceIdent(playMedium, trackSource);\n        // Did the source ident change...?\n        if (sourceIdent !== WNP.d.prevSourceIdent) {\n            if (sourceIdent !== \"\") {\n                var identImg = document.createElement(\"img\");\n                identImg.src = sourceIdent;\n                identImg.alt = playMedium + \": \" + trackSource;\n                identImg.title = playMedium + \": \" + trackSource;\n                mediaSource.innerHTML = identImg.outerHTML;\n            } else mediaSource.innerText = playMedium + \": \" + trackSource;\n            WNP.d.prevSourceIdent = sourceIdent; // Remember the last Source Ident\n        }\n        // Song Title, Subtitle, Artist, Album\n        WNP.r.mediaTitle.innerText = msg.trackMetaData && msg.trackMetaData[\"dc:title\"] ? msg.trackMetaData[\"dc:title\"] : \"\";\n        WNP.r.mediaSubTitle.innerText = msg.trackMetaData && msg.trackMetaData[\"dc:subtitle\"] ? msg.trackMetaData[\"dc:subtitle\"] : \"\";\n        WNP.r.mediaArtist.innerText = msg.trackMetaData && msg.trackMetaData[\"upnp:artist\"] ? msg.trackMetaData[\"upnp:artist\"] : \"\";\n        WNP.r.mediaAlbum.innerText = msg.trackMetaData && msg.trackMetaData[\"upnp:album\"] ? msg.trackMetaData[\"upnp:album\"] : \"\";\n        if (playMedium === \"SONGLIST-NETWORK\" && !trackSource && msg.CurrentTransportState === \"STOPPED\") WNP.r.mediaTitle.innerText = \"No Music Selected\";\n        // Audio quality\n        var songBitrate = msg.trackMetaData && msg.trackMetaData[\"song:bitrate\"] ? msg.trackMetaData[\"song:bitrate\"] : \"\";\n        var songBitDepth = msg.trackMetaData && msg.trackMetaData[\"song:format_s\"] ? msg.trackMetaData[\"song:format_s\"] : \"\";\n        var songSampleRate = msg.trackMetaData && msg.trackMetaData[\"song:rate_hz\"] ? msg.trackMetaData[\"song:rate_hz\"] : \"\";\n        WNP.r.mediaBitRate.innerText = songBitrate > 0 ? songBitrate > 1000 ? (songBitrate / 1000).toFixed(2) + \" mbps, \" : songBitrate + \" kbps, \" : \"\";\n        WNP.r.mediaBitDepth.innerText = songBitDepth > 0 ? songBitDepth > 24 ? \"24 bit/\" : songBitDepth + \" bit/\" : \"\";\n        WNP.r.mediaSampleRate.innerText = songSampleRate > 0 ? (songSampleRate / 1000).toFixed(1) + \" kHz\" : \"\";\n        if (!songBitrate && !songBitDepth && !songSampleRate) WNP.r.mediaQualityIdent.style.display = \"none\";\n        else WNP.r.mediaQualityIdent.style.display = \"inline-block\";\n        // Audio quality ident badge (HD/Hi-res/CD/...)\n        var songQuality = msg.trackMetaData && msg.trackMetaData[\"song:quality\"] ? msg.trackMetaData[\"song:quality\"] : \"\";\n        var songActualQuality = msg.trackMetaData && msg.trackMetaData[\"song:actualQuality\"] ? msg.trackMetaData[\"song:actualQuality\"] : \"\";\n        var qualiIdent = WNP.getQualityIdent(songQuality, songActualQuality, songBitrate, songBitDepth, songSampleRate);\n        if (qualiIdent !== \"\") {\n            WNP.r.mediaQualityIdent.innerText = qualiIdent;\n            WNP.r.mediaQualityIdent.title = \"Quality: \" + songQuality + \", \" + songActualQuality;\n        } else {\n            var identId = document.createElement(\"i\");\n            identId.className = \"bi bi-soundwave text-secondary\";\n            identId.title = \"Quality: \" + songQuality + \", \" + songActualQuality;\n            WNP.r.mediaQualityIdent.innerHTML = identId.outerHTML;\n        }\n        // Pre-process Album Art uri, if any is available from the metadata.\n        var albumArtUriRaw = msg.trackMetaData && msg.trackMetaData[\"upnp:albumArtURI\"] ? msg.trackMetaData[\"upnp:albumArtURI\"] : \"\";\n        var albumArtUri = WNP.checkAlbumArtURI(albumArtUriRaw, msg.metadataTimeStamp);\n        // Set Album Art, only if the track changed and the URI changed\n        var trackChanged = false;\n        var currentTrackInfo = WNP.r.mediaTitle.innerText + \"|\" + WNP.r.mediaSubTitle.innerText + \"|\" + WNP.r.mediaArtist.innerText + \"|\" + WNP.r.mediaAlbum.innerText;\n        var currentAlbumArt = WNP.r.albumArt.src;\n        if (WNP.d.prevTrackInfo !== currentTrackInfo) {\n            trackChanged = true;\n            WNP.d.prevTrackInfo = currentTrackInfo; // Remember the last track info\n            console.log(\"WNP\", \"Track changed:\", currentTrackInfo);\n        }\n        if (trackChanged && currentAlbumArt != albumArtUri) WNP.setAlbumArt(albumArtUri);\n        // Device volume\n        WNP.r.devVol.innerText = msg.CurrentVolume ? msg.CurrentVolume : \"-\"; // Set the volume on the UI\n        if (WNP.r.rVolume && WNP.r.rVolume.value !== WNP.r.devVol.innerText) WNP.r.rVolume.value = WNP.r.devVol.innerText;\n        // Loop mode status\n        if (msg.LoopMode) switch(msg.LoopMode){\n            case \"5\":\n                WNP.r.btnRepeat.className = \"btn btn-outline-success\";\n                WNP.r.btnRepeat.children[0].className = \"bi bi-repeat-1\";\n                WNP.r.btnShuffle.className = \"btn btn-outline-success\";\n                break;\n            case \"3\":\n                WNP.r.btnRepeat.className = \"btn btn-outline-light\";\n                WNP.r.btnRepeat.children[0].className = \"bi bi-repeat\";\n                WNP.r.btnShuffle.className = \"btn btn-outline-success\";\n                break;\n            case \"2\":\n                WNP.r.btnRepeat.className = \"btn btn-outline-success\";\n                WNP.r.btnRepeat.children[0].className = \"bi bi-repeat\";\n                WNP.r.btnShuffle.className = \"btn btn-outline-success\";\n                break;\n            case \"1\":\n                WNP.r.btnRepeat.className = \"btn btn-outline-success\";\n                WNP.r.btnRepeat.children[0].className = \"bi bi-repeat-1\";\n                WNP.r.btnShuffle.className = \"btn btn-outline-light\";\n                break;\n            case \"0\":\n                WNP.r.btnRepeat.className = \"btn btn-outline-success\";\n                WNP.r.btnRepeat.children[0].className = \"bi bi-repeat\";\n                WNP.r.btnShuffle.className = \"btn btn-outline-light\";\n                break;\n            default:\n                WNP.r.btnRepeat.className = \"btn btn-outline-light\";\n                WNP.r.btnRepeat.children[0].className = \"bi bi-repeat\";\n                WNP.r.btnShuffle.className = \"btn btn-outline-light\";\n        }\n        else {\n            WNP.r.btnRepeat.className = \"btn btn-outline-light\";\n            WNP.r.btnRepeat.children[0].className = \"bi bi-repeat\";\n            WNP.r.btnShuffle.className = \"btn btn-outline-light\";\n        }\n    });\n    // On device set\n    socket.on(\"device-set\", function(msg) {\n        // Device switch? Fetch settings and device info again.\n        socket.emit(\"server-settings\");\n        socket.emit(\"devices-get\");\n    });\n    // On device refresh\n    socket.on(\"devices-refresh\", function(msg) {\n        WNP.r.selDeviceChoices.innerHTML = \"<option disabled=\\\"disabled\\\">Waiting for devices...</em></li>\";\n        if (WNP.r.oDeviceList) WNP.r.oDeviceList.innerHTML = \"<li><span class=\\\"dropdown-header\\\">Waiting for devices...</span></li>\";\n    });\n    // On device action (i.e. for play, pause, next, previous)\n    socket.on(\"device-action\", function(msg, param) {\n        // Actions do not return a message.\n        // so we don't need to do anything here.\n        // Maybe later we can use this to show a notification or similar.\n        console.log(\"WNP\", \"Action:\", msg);\n    });\n    // On device API response\n    socket.on(\"device-api\", function(msg, param) {\n        // console.log(\"IO: device-api\", msg, param);\n        switch(msg){\n            case \"getPresetInfo\":\n                // Preset info response\n                if (!param || param.preset_num < 1) {\n                    // No presets\n                    WNP.r.oPresetList.innerHTML = \"<li><span class=\\\"dropdown-header\\\">No presets found!</span></li>\";\n                    return false;\n                } else {\n                    // Presets found\n                    WNP.r.oPresetList.innerHTML = \"\"; // Clear existing list\n                    var sCurrentTitle = WNP.r.mediaTitle.innerText;\n                    var sCurrentSubtitle = WNP.r.mediaSubTitle.innerText;\n                    param.preset_list.forEach((preset)=>{\n                        var ddItem = document.createElement(\"li\");\n                        var ddItemA = document.createElement(\"a\");\n                        ddItemA.className = \"dropdown-item\";\n                        ddItemA.href = \"javascript:WNP.setPresetByNumber(\" + preset.number + \");\";\n                        ddItemA.innerHTML = \"<img src=\\\"\" + WNP.checkAlbumArtURI(preset.picurl, Date.now()) + \"\\\"/> \" + preset.name;\n                        if (sCurrentTitle === preset.name || sCurrentSubtitle === preset.name) {\n                            ddItemA.classList.add(\"active\");\n                            ddItemA.setAttribute(\"aria-current\", \"true\");\n                        }\n                        ddItem.appendChild(ddItemA);\n                        WNP.r.oPresetList.appendChild(ddItem);\n                    });\n                }\n                break;\n            case msg.startsWith(\"MCUKeyShortClick:\") ? msg : false:\n                break;\n            case \"getPlayerStatus\":\n                // Player status response\n                // Called when getting volume\n                if (param && param.vol !== undefined) WNP.r.devVol.innerText = param.vol;\n                break;\n            case msg.startsWith(\"setPlayerCmd:vol:\") ? msg : false:\n                // Volume set response\n                socket.emit(\"device-api\", \"getPlayerStatus\"); // Refresh volume UI\n                break;\n            default:\n                break;\n        }\n    });\n    // On server reboot\n    socket.on(\"server-reboot\", function(msg) {\n        // Possibly show a notification that reboot is in progress\n        console.log(\"WNP\", \"Server reboot:\", msg);\n    });\n    // On server update\n    socket.on(\"server-update\", function(msg) {\n        // Possibly show a notification that update is in progress\n        console.log(\"WNP\", \"Server update:\", msg);\n    });\n    // On server shutdown\n    socket.on(\"server-shutdown\", function(msg) {\n        // Possibly show a notification that shutdown is in progress\n        console.log(\"WNP\", \"Server shutdown:\", msg);\n    });\n};\n// =======================================================\n// Helper functions\n/**\n * Set device according to the chosen one through the Device dropup.\n * @param {string} deviceLocation - The location of the device to set.\n * @return {undefined}\n  */ WNP.setDeviceByLocation = function(deviceLocation) {\n    if (deviceLocation) socket.emit(\"device-set\", deviceLocation);\n    return false;\n};\n/**\n * Set the preset on the device.\n * @param {integer} presetNumber - The number of the preset to set.\n * @return {undefined}\n */ WNP.setPresetByNumber = function(presetNumber) {\n    if (presetNumber && !isNaN(presetNumber) && presetNumber > 0) socket.emit(\"device-api\", \"MCUKeyShortClick:\" + presetNumber);\n    return false;\n};\n/**\n * Get player progress helper.\n * @param {string} relTime - Time elapsed while playing, format 00:00:00\n * @param {string} trackDuration - Total play time, format 00:00:00\n * @param {integer} timeStampDiff - Possible play time offset in seconds\n * @param {string} currentTransportState - The current transport state \"PLAYING\" or otherwise\n * @returns {object} An object with corrected played, left, total and percentage played\n */ WNP.getPlayerProgress = function(relTime, trackDuration, timeStampDiff, currentTransportState) {\n    var relTimeSec = this.convertToSeconds(relTime) + timeStampDiff;\n    var trackDurationSec = this.convertToSeconds(trackDuration);\n    if (trackDurationSec > 0 && relTimeSec < trackDurationSec) {\n        var percentPlayed = (relTimeSec / trackDurationSec * 100).toFixed(1);\n        return {\n            played: WNP.convertToMinutes(relTimeSec),\n            left: WNP.convertToMinutes(trackDurationSec - relTimeSec),\n            total: WNP.convertToMinutes(trackDurationSec),\n            percent: percentPlayed\n        };\n    } else if (trackDurationSec == 0 && currentTransportState == \"PLAYING\") return {\n        played: \"Live\",\n        left: \"\",\n        total: \"\",\n        percent: 100\n    };\n    else return {\n        played: \"Paused\",\n        left: \"\",\n        total: \"\",\n        percent: 0\n    };\n};\n/**\n * Convert time format '00:00:00' to total number of seconds.\n * @param {string} sDuration - Time, format 00:00:00.\n * @returns {integer} The number of seconds that the string represents.\n */ WNP.convertToSeconds = function(sDuration) {\n    const timeSections = sDuration.split(\":\");\n    let totalSeconds = 0;\n    for(let i = 0; i < timeSections.length; i++){\n        var nFactor = timeSections.length - 1 - i; // Count backwards\n        var nMultiplier = Math.pow(60, nFactor); // 60^n\n        totalSeconds += nMultiplier * parseInt(timeSections[i]); // Calculate the seconds\n    }\n    return totalSeconds;\n};\n/**\n * Convert number of seconds to '00:00' string format. \n * Sorry for those hour+ long songs...\n * @param {integer} seconds - Number of seconds total.\n * @returns {string} The string representation of seconds in minutes, format 00:00.\n */ WNP.convertToMinutes = function(seconds) {\n    var tempDate = new Date(0);\n    tempDate.setSeconds(seconds);\n    var result = tempDate.toISOString().substring(14, 19);\n    return result;\n};\n/**\n * Check if the album art is a valid URI. Returns the URI if valid, otherwise a random URI.\n * Error handling is handled by the onerror event on the image itself.\n * @param {string} sAlbumArtUri - The URI of the album art.\n * @param {integer} nTimestamp - The time in milliseconds, used as cache buster.\n * @returns {string} The URI of the album art.\n */ WNP.checkAlbumArtURI = function(sAlbumArtUri, nTimestamp) {\n    // If the URI starts with https, the self signed certificate may not trusted by the browser.\n    // Hence we always try and load the image through a reverse proxy, ignoring the certificate.\n    if (sAlbumArtUri && sAlbumArtUri.startsWith(\"https\")) {\n        var sAlbumArtProxyUri = \"\";\n        if (WNP.s.locPort != \"80\") sAlbumArtProxyUri = \"http://\" + WNP.s.locHostname + \":\" + WNP.s.locPort + \"/proxy-art?url=\" + encodeURIComponent(sAlbumArtUri) + \"&ts=\" + nTimestamp; // Use the current timestamp as cache buster\n        else sAlbumArtProxyUri = \"http://\" + WNP.s.locHostname + \"/proxy-art?url=\" + encodeURIComponent(sAlbumArtUri) + \"&ts=\" + nTimestamp; // Use the current timestamp as cache buster\n        return sAlbumArtProxyUri;\n    } else if (sAlbumArtUri && sAlbumArtUri.startsWith(\"http\")) return sAlbumArtUri;\n    else // Looks like an invalid/un_known album art, use the fallback.\n    return WNP.s.rndAlbumArtUri;\n};\n/**\n * Sets the album art. Both on the foreground and background.\n * @param {integer} imgUri - The URI of the album art.\n * @returns {undefined}\n */ WNP.setAlbumArt = function(imgUri) {\n    console.log(\"WNP\", \"Set Album Art\", imgUri);\n    this.r.albumArt.src = imgUri;\n    this.r.bgAlbumArtBlur.style.backgroundImage = \"url('\" + imgUri + \"')\";\n};\n/**\n * Come up with a random album art URI (locally from the img folder).\n * @param {string} prefix - The prefix for the album art URI, i.e. 'fake-album-'\n * @returns {string} An URI for album art\n */ WNP.rndAlbumArt = function(prefix) {\n    return \"./img/\" + prefix + this.rndNumber(1, 16) + \".jpg\";\n};\n/**\n * Get a random number between min and max, including min and max.\n * @param {integer} min - Minimum number to pick, keep it lower than max.\n * @param {integer} max - Maximum number to pick.\n * @returns {integer} The random number\n */ WNP.rndNumber = function(min, max) {\n    return Math.floor(Math.random() * (max - min + 1)) + min;\n};\n/**\n * Get an identifier for the current play medium combined with the tracksource.\n * TODO: Verify all/most sources...\n * @param {string} playMedium - The PlayMedium as indicated by the device. Values: SONGLIST-NETWORK, RADIO-NETWORK, STATION-NETWORK, CAST, AIRPLAY, SPOTIFY, UNKOWN\n * @param {string} trackSource - The stream source as indicated by the device. Values: Prime, Qobuz, SPOTIFY, newTuneIn, iHeartRadio, Deezer, UPnPServer, Tidal, vTuner\n * @returns {string} The uri to the source identifier (image url)\n */ WNP.getSourceIdent = function(playMedium, trackSource) {\n    var sIdentUri = \"\";\n    switch(playMedium.toLowerCase()){\n        case \"airplay\":\n            sIdentUri = \"./img/sources/airplay2.png\";\n            break;\n        case \"third-dlna\":\n            sIdentUri = \"./img/sources/dlna2.png\";\n            break;\n        case \"cast\":\n            sIdentUri = \"./img/sources/chromecast2.png\";\n            break;\n        case \"radio-network\":\n            sIdentUri = \"./img/sources/radio.png\";\n            break;\n        case \"songlist-network\":\n            sIdentUri = \"./img/sources/ethernet2.png\";\n            break;\n        case \"spotify\":\n            sIdentUri = \"./img/sources/spotify.png\";\n            break;\n        case \"squeezelite\":\n            sIdentUri = \"./img/sources/music-assistant2.png\";\n            break;\n        case \"none\":\n            sIdentUri = \"./img/sources/none2.png\";\n            break;\n        case \"bluetooth\":\n            sIdentUri = \"./img/sources/bluetooth2.png\";\n            break;\n        case \"hdmi\":\n            sIdentUri = \"./img/sources/hdmi2.png\";\n            break;\n        case \"line-in\":\n            sIdentUri = \"./img/sources/line-in2.png\";\n            break;\n        case \"optical\":\n            sIdentUri = \"./img/sources/spdif2.png\";\n            break;\n    }\n    switch(trackSource.toLowerCase()){\n        case \"deezer\":\n        case \"deezer2\":\n            sIdentUri = \"./img/sources/deezer.png\";\n            break;\n        case \"iheartradio\":\n            sIdentUri = \"./img/sources/iheart.png\";\n            break;\n        case \"newtunein\":\n            sIdentUri = \"./img/sources/newtunein.png\";\n            break;\n        case \"plex\":\n            sIdentUri = \"./img/sources/plex.png\";\n            break;\n        case \"prime\":\n            sIdentUri = \"./img/sources/amazon-music2.png\";\n            break;\n        case \"qobuz\":\n            sIdentUri = \"./img/sources/qobuz2.png\";\n            break;\n        case \"tidal\":\n            sIdentUri = \"./img/sources/tidal2.png\";\n            break;\n        case \"upnpserver\":\n            sIdentUri = \"./img/sources/dlna2.png\";\n            break;\n        case \"vtuner\":\n            sIdentUri = \"./img/sources/vtuner2.png\";\n            break;\n    }\n    return sIdentUri;\n};\n/**\n * Get an identifier for the current audio/song quality.\n * TODO: Verify all/most sources...\n * Found so far:\n * \n * CD Quality: 44.1 KHz/16 bit. Bitrate 1,411 kbps. For mp3 bitrate can vary, but also be 320/192/160/128/... kbps.\n * Hi-Res quality: 96 kHz/24 bit and up. Bitrate 9,216 kbps.\n * \n * Spotify Lossless: bitrate 700 kbps, 44.1 kHz/24 bit\n * Spotify and Pandora usual bitrate 160 kbps, premium is 320 kbps\n * Tidal has CD quality, and FLAC, MQA, Master, ...\n * Qobuz apparently really has hi-res?\n * Amazon Music (Unlimited) does Atmos?\n * Apple Music -> Airplay 2, does hi-res?\n * YouTube Music -> Cast, does what?\n * \n * TIDAL -\n * Sample High: \"song:quality\":\"2\",\"song:actualQuality\":\"LOSSLESS\"\n * Sample MQA: \"song:quality\":\"3\",\"song:actualQuality\":\"HI_RES\"\n * Sample FLAC: \"song:quality\":\"4\",\"song:actualQuality\":\"HI_RES_LOSSLESS\"\n * \n * @param {integer} songQuality - A number identifying the quality, as indicated by the streaming service(?).\n * @param {string} songActualQuality - An indicator for the actual quality, as indicated by the streaming service(?).\n * @param {integer} songBitrate - The current bitrate in kilobit per second.\n * @param {integer} songBitDepth - The current sample depth in bits.\n * @param {integer} songSampleRate - The current sample rate in Hz.\n * @returns {string} The identifier for the audio quality, just a string.\n */ WNP.getQualityIdent = function(songQuality, songActualQuality, songBitrate, songBitDepth, songSampleRate) {\n    // console.log(songQuality, songActualQuality, songBitrate, songBitDepth, songSampleRate);\n    var sIdent = \"\";\n    if (songBitrate >= 700 && songBitDepth == 24 && songSampleRate == 44100) sIdent = \"Lossless\";\n    if (songBitrate > 1000 && songBitDepth == 16 && songSampleRate == 44100) sIdent = \"CD\";\n    else if (songBitrate > 7000 && songBitDepth >= 24 && songSampleRate >= 96000) sIdent = \"Hi-Res\";\n    // Based of Tidal/Amazon Music Unlimited/Deezer/Qobuz\n    switch(songQuality + \":\" + songActualQuality){\n        case \"2:LOSSLESS\":\n        case \":LOSSLESS\":\n            sIdent = \"HIGH\";\n            break;\n        case \"3:HI_RES\":\n            sIdent = \"MQA\";\n            break;\n        case \"4:HI_RES_LOSSLESS\":\n        case \":HI_RES_LOSSLESS\":\n        case \"0:LOSSLESS\":\n            sIdent = \"FLAC\";\n            break;\n        case \":UHD\":\n            sIdent = \"ULTRA HD\";\n            break;\n        case \":HD\":\n            sIdent = \"HD\"; // Amazon Music\n            break;\n        case \"3:7\":\n        case \"4:27\":\n            sIdent = \"Hi-Res\"; // Qobuz\n            break;\n        case \"2:6\":\n            sIdent = \"CD\"; // Qobuz\n            break;\n    }\n    return sIdent;\n};\n// =======================================================\n// Start WiiM Now Playing app\nWNP.Init();\n\n\n//# sourceMappingURL=client.bc59c7cc.js.map\n","// =======================================================\n// WiiM Now Playing\n\n// Namespacing\nwindow.WNP = window.WNP || {};\n\n// Default settings\nWNP.s = {\n    // Host runs on default port 80, but in cases where another port is chosen adapt\n    locHostname: location.hostname,\n    locPort: (location.port && location.port != \"80\" && location.port != \"1234\") ? location.port : \"80\",\n    rndAlbumArtUri: \"./img/fake-album-1.jpg\",\n    // Device selection\n    aDeviceUI: [\"btnPrev\", \"btnPlay\", \"btnNext\", \"btnRefresh\", \"selDeviceChoices\", \"devName\", \"devNameHolder\", \"mediaTitle\", \"mediaSubTitle\", \"mediaArtist\", \"mediaAlbum\", \"mediaBitRate\", \"mediaBitDepth\", \"mediaSampleRate\", \"mediaQualityIdent\", \"devVol\", \"btnRepeat\", \"btnShuffle\", \"progressPlayed\", \"progressLeft\", \"progressPercent\", \"mediaSource\", \"albumArt\", \"bgAlbumArtBlur\", \"btnDevSelect\", \"oDeviceList\", \"btnDevPreset\", \"oPresetList\", \"btnDevVolume\", \"rVolume\"],\n    // Server actions to be used in the app\n    aServerUI: [\"btnReboot\", \"btnUpdate\", \"btnShutdown\", \"btnReloadUI\", \"sServerUrlHostname\", \"sServerUrlIP\", \"sServerVersion\", \"sClientVersion\"],\n};\n\n// Data placeholders.\nWNP.d = {\n    serverSettings: null, // Server settings, used to store the server settings\n    deviceList: null, // Device list, used to store the devices found through SSDP\n    prevTransportState: null, // Previous transport state, used to detect changes in the transport state\n    prevPlayMedium: null, // Previous play medium, used to detect changes in the play medium\n    prevSourceIdent: null, // Previous source ident, used to detect changes in the source\n    prevTrackInfo: null // Previous track info, used to detect changes in the metadata\n};\n\n// Reference placeholders.\n// These are set in the init function\n// and are used to reference the UI elements in the app.\nWNP.r = {};\n\n/**\n * Initialisation of app.\n * @returns {undefined}\n */\nWNP.Init = function () {\n    console.log(\"WNP\", \"Initialising...\");\n\n    // Init Socket.IO, connect to port where server resides\n    console.log(\"WNP\", \"Listening on \" + this.s.locHostname + \":\" + this.s.locPort)\n    window.socket = io.connect(\":\" + this.s.locPort);\n\n    // Set references to the UI elements\n    this.setUIReferences();\n\n    // Set Socket.IO definitions\n    this.setSocketDefinitions();\n\n    // Set UI event listeners\n    this.setUIListeners();\n\n    // Initial calls, wait a bit for socket to start\n    setTimeout(() => {\n        // Get server settings\n        socket.emit(\"server-settings\");\n        // Get devices\n        socket.emit(\"devices-get\");\n    }, 500);\n\n    // Create random album intervals, every 3 minutes\n    WNP.s.rndAlbumArtUri = WNP.rndAlbumArt(\"fake-album-\");\n    var rndAlbumInterval = setInterval(function () {\n        WNP.s.rndAlbumArtUri = WNP.rndAlbumArt(\"fake-album-\");\n    }, 3 * 60 * 1000);\n\n};\n\n/**\n * Reference to the UI elements of the app.\n * @returns {undefined}\n */\nWNP.setUIReferences = function () {\n    console.log(\"WNP\", \"Set UI references...\")\n\n    function addElementToRef(id) {\n        const element = document.getElementById(id);\n        if (element) {\n            WNP.r[id] = element;\n        } else {\n            console.log(\"WNP\", `Element with ID '${id}' not found in current HTML.`);\n        }\n    }\n\n    // Set references to the UI elements\n    this.s.aDeviceUI.forEach((id) => { addElementToRef(id); });\n    this.s.aServerUI.forEach((id) => { addElementToRef(id); });\n\n};\n\n/**\n * Setting the listeners on the UI elements of the app.\n * @returns {undefined}\n */\nWNP.setUIListeners = function () {\n    console.log(\"WNP\", \"Set UI Listeners...\")\n\n    // ------------------------------------------------\n    // Player buttons\n\n    // Previous button\n    this.r.btnPrev.addEventListener(\"click\", function () {\n        var wnpAction = this.getAttribute(\"wnp-action\");\n        if (wnpAction) {\n            this.disabled = true;\n            socket.emit(\"device-action\", wnpAction);\n        }\n    });\n\n    // Play/Pause/Stop button\n    this.r.btnPlay.addEventListener(\"click\", function () {\n        var wnpAction = this.getAttribute(\"wnp-action\");\n        if (wnpAction) {\n            this.disabled = true;\n            socket.emit(\"device-action\", wnpAction);\n        }\n    });\n\n    // Next button\n    this.r.btnNext.addEventListener(\"click\", function () {\n        var wnpAction = this.getAttribute(\"wnp-action\");\n        if (wnpAction) {\n            this.disabled = true;\n            socket.emit(\"device-action\", wnpAction);\n        }\n    });\n\n    // ------------------------------------------------\n    // Device control inputs (only for default GUI, not TV mode)\n\n    // Device select button\n    if (this.r.btnDevPreset) {\n        this.r.btnDevPreset.addEventListener(\"click\", function () {\n            socket.emit(\"device-api\", \"getPresetInfo\");\n        });\n    }\n\n    // Device volume range input\n    if (this.r.rVolume) {\n        this.r.rVolume.addEventListener('input', function () {\n            if (!isNaN(this.value) && this.value >= 0 && this.value <= 100) {\n                socket.emit(\"device-api\", \"setPlayerCmd:vol:\" + this.value);\n            }\n        });\n    }\n\n    // ------------------------------------------------\n    // Settings buttons\n\n    // Device selection dropdown\n    this.r.selDeviceChoices.addEventListener(\"change\", function () {\n        socket.emit(\"device-set\", this.value);\n    });\n\n    // Refresh devices button\n    this.r.btnRefresh.addEventListener(\"click\", function () {\n        socket.emit(\"devices-refresh\");\n        // Wait for discovery to finish\n        setTimeout(() => {\n            socket.emit(\"devices-get\");\n            socket.emit(\"server-settings\");\n        }, 5000);\n    });\n\n    // Reboot button\n    this.r.btnReboot.addEventListener(\"click\", function () {\n        socket.emit(\"server-reboot\");\n    });\n\n    // Update button\n    this.r.btnUpdate.addEventListener(\"click\", function () {\n        socket.emit(\"server-update\");\n    });\n\n    // Shutdown button\n    this.r.btnShutdown.addEventListener(\"click\", function () {\n        socket.emit(\"server-shutdown\");\n    });\n\n    // Reload UI button\n    this.r.btnReloadUI.addEventListener(\"click\", function () {\n        location.reload();\n    });\n\n};\n\n/**\n * Set the socket definitions to listen for specific websocket traffic and handle accordingly.\n * @returns {undefined}\n */\nWNP.setSocketDefinitions = function () {\n    console.log(\"WNP\", \"Setting Socket definitions...\")\n\n    // On server settings\n    socket.on(\"server-settings\", function (msg) {\n\n        // Store server settings\n        WNP.d.serverSettings = msg;\n\n        // RPi has bash, so possibly able to reboot/shutdown.\n        if (msg && msg.os && msg.os.userInfo && msg.os.userInfo.shell === \"/bin/bash\") {\n            WNP.r.btnReboot.disabled = false;\n            WNP.r.btnUpdate.disabled = false;\n            WNP.r.btnShutdown.disabled = false;\n        };\n\n        // Set device name\n        WNP.r.devName.innerText = (msg && msg.selectedDevice && msg.selectedDevice.friendlyName) ? msg.selectedDevice.friendlyName : \"-\";\n\n        // Set the server local url\n        if (msg && msg.os && msg.os.hostname) {\n            var sUrl = \"http://\" + msg.os.hostname.toLowerCase() + \".local\";\n            sUrl += (location && location.port && location.port != 80) ? \":\" + location.port + \"/\" : \"/\";\n            WNP.r.sServerUrlHostname.innerHTML = \"<a href=\\\"\" + sUrl + \"\\\">\" + sUrl + \"</a>\";\n        }\n        else {\n            WNP.r.sServerUrlHostname.innerText = \"-\";\n        }\n        // Set the server ip address\n        if (msg && msg.selectedDevice && msg.selectedDevice.location && msg.os && msg.os.networkInterfaces) {\n            // Grab the ip address pattern of the selected device\n            // Assumption is that the wiim-now-playing server is on the same ip range as the client..\n            var sLocationIp = msg.selectedDevice.location.split(\"/\")[2]; // Extract ip address from location\n            var aIpAddress = sLocationIp.split(\".\"); // Split ip address in parts\n            aIpAddress.pop(); // Remove the last part\n            var sIpPattern = aIpAddress.join(\".\"); // Construct ip address pattern\n            // Search for server ip address(es) in this range...\n            Object.keys(msg.os.networkInterfaces).forEach(function (key, index) {\n                var sIpFound = msg.os.networkInterfaces[key].find(addr => addr.address.startsWith(sIpPattern))\n                if (sIpFound) {\n                    // Construct ip address and optional port\n                    var sUrl = \"http://\" + sIpFound.address;\n                    sUrl += (location && location.port && location.port != 80) ? \":\" + location.port + \"/\" : \"/\";\n                    WNP.r.sServerUrlIP.innerHTML = \"<a href=\\\"\" + sUrl + \"\\\">\" + sUrl + \"</a>\";\n                }\n            });\n        }\n        else {\n            WNP.r.sServerUrlIP.innerText = \"-\";\n        }\n\n        // Set the server version\n        WNP.r.sServerVersion.innerText = (msg && msg.version && msg.version.server) ? msg.version.server : \"-\";\n        // Set the client version\n        WNP.r.sClientVersion.innerText = (msg && msg.version && msg.version.client) ? msg.version.client : \"-\";\n\n    });\n\n    // On devices get\n    socket.on(\"devices-get\", function (msg) {\n\n        // Store and sort device list\n        WNP.d.deviceList = msg;\n        WNP.d.deviceList.sort((a, b) => { return (a.friendlyName < b.friendlyName) ? -1 : 1 });\n\n        // Clear choices\n        WNP.r.selDeviceChoices.innerHTML = \"<option value=\\\"\\\">Select a device...</em></li>\"; // Settings modal\n        if (WNP.r.oDeviceList) WNP.r.oDeviceList.innerHTML = \"\"; // Device dropup\n\n        // Add WiiM devices\n        var devicesWiiM = WNP.d.deviceList.filter((d) => { return d.manufacturer.startsWith(\"Linkplay\") });\n        if (devicesWiiM.length > 0) {\n\n            // Device select options\n            var optGroup = document.createElement(\"optgroup\");\n            optGroup.label = \"WiiM devices\";\n            devicesWiiM.forEach((device) => {\n                var opt = document.createElement(\"option\");\n                opt.value = device.location;\n                opt.innerText = device.friendlyName;\n                opt.title = \"By \" + device.manufacturer;\n                if (WNP.d.serverSettings && WNP.d.serverSettings.selectedDevice && WNP.d.serverSettings.selectedDevice.location === device.location) {\n                    opt.setAttribute(\"selected\", \"selected\");\n                };\n                optGroup.appendChild(opt);\n            })\n            WNP.r.selDeviceChoices.appendChild(optGroup);\n\n            // Device dropup\n            if (WNP.r.oDeviceList) {\n                devicesWiiM.forEach((device) => {\n                    var ddItem = document.createElement(\"li\");\n                    var ddItemA = document.createElement(\"a\");\n                    ddItemA.className = \"dropdown-item\";\n                    ddItemA.href = \"javascript:WNP.setDeviceByLocation('\" + device.location + \"');\";\n                    ddItemA.innerText = device.friendlyName;\n                    if (WNP.d.serverSettings && WNP.d.serverSettings.selectedDevice && WNP.d.serverSettings.selectedDevice.location === device.location) {\n                        ddItemA.classList.add(\"active\");\n                        ddItemA.setAttribute(\"aria-current\", \"true\");\n                    }\n                    ddItem.appendChild(ddItemA);\n                    WNP.r.oDeviceList.appendChild(ddItem);\n                })\n            }\n\n        };\n\n        // Other devices\n        // Possibly removing this section in future releases.\n        var devicesOther = WNP.d.deviceList.filter((d) => { return !d.manufacturer.startsWith(\"Linkplay\") });\n        if (devicesOther.length > 0) {\n\n            // Device select dropdown options\n            var optGroup = document.createElement(\"optgroup\");\n            optGroup.label = \"Other devices\";\n            devicesOther.forEach((device) => {\n                var opt = document.createElement(\"option\");\n                opt.value = device.location;\n                opt.innerText = device.friendlyName;\n                opt.title = \"By \" + device.manufacturer;\n                if (WNP.d.serverSettings && WNP.d.serverSettings.selectedDevice && WNP.d.serverSettings.selectedDevice.location === device.location) {\n                    opt.setAttribute(\"selected\", \"selected\");\n                };\n                optGroup.appendChild(opt);\n            })\n            WNP.r.selDeviceChoices.appendChild(optGroup);\n\n            // Device dropup\n            // We won't show non-WiiM devices in the dropup for now.\n\n        };\n\n        // No devices found\n        if (devicesWiiM.length == 0 && devicesOther.length == 0) {\n            WNP.r.selDeviceChoices.innerHTML = \"<option disabled=\\\"disabled\\\">No devices found!</em></li>\";\n            if (WNP.r.oDeviceList) WNP.r.oDeviceList.innerHTML = \"<li><span class=\\\"dropdown-header\\\">No devices found!</span></li>\";\n        };\n\n    });\n\n    // On state\n    socket.on(\"state\", function (msg) {\n        if (!msg) { return false; }\n\n        // Get player progress data from the state message.\n        var timeStampDiff = 0;\n        if (msg.CurrentTransportState === \"PLAYING\") {\n            timeStampDiff = (msg.stateTimeStamp && msg.metadataTimeStamp) ? Math.round((msg.stateTimeStamp - msg.metadataTimeStamp) / 1000) : 0;\n        }\n        var relTime = (msg.RelTime) ? msg.RelTime : \"00:00:00\";\n        var trackDuration = (msg.TrackDuration) ? msg.TrackDuration : \"00:00:00\";\n\n        // Get current player progress and set UI elements accordingly.\n        var oPlayerProgress = WNP.getPlayerProgress(relTime, trackDuration, timeStampDiff, msg.CurrentTransportState);\n        WNP.r.progressPlayed.children[0].innerText = oPlayerProgress.played;\n        WNP.r.progressLeft.children[0].innerText = (oPlayerProgress.left != \"\") ? \"-\" + oPlayerProgress.left : \"\";\n        WNP.r.progressPercent.setAttribute(\"aria-valuenow\", oPlayerProgress.percent)\n        WNP.r.progressPercent.children[0].setAttribute(\"style\", \"width:\" + oPlayerProgress.percent + \"%\");\n\n        // Device transport state or play medium changed...?\n        if (WNP.d.prevTransportState !== msg.CurrentTransportState || WNP.d.prevPlayMedium !== msg.PlayMedium) {\n            if (msg.CurrentTransportState === \"TRANSITIONING\") {\n                WNP.r.btnPlay.children[0].className = \"bi bi-circle-fill\";\n                WNP.r.btnPlay.disabled = true;\n            };\n            if (msg.CurrentTransportState === \"PLAYING\") {\n                // Radio live streams are preferrentialy stopped as pausing keeps cache for minutes/hours(?).\n                // Stop > Play resets the stream to 'now'. Pause works like 'live tv time shift'.\n                if (msg.PlayMedium && msg.PlayMedium === \"RADIO-NETWORK\") {\n                    WNP.r.btnPlay.children[0].className = \"bi bi-stop-circle-fill\";\n                    WNP.r.btnPlay.setAttribute(\"wnp-action\", \"Stop\");\n                }\n                else {\n                    WNP.r.btnPlay.children[0].className = \"bi bi-pause-circle-fill\";\n                    WNP.r.btnPlay.setAttribute(\"wnp-action\", \"Pause\");\n                }\n                WNP.r.btnPlay.disabled = false;\n            }\n            else if (msg.CurrentTransportState === \"PAUSED_PLAYBACK\" || msg.CurrentTransportState === \"STOPPED\") {\n                WNP.r.btnPlay.children[0].className = \"bi bi-play-circle-fill\";\n                WNP.r.btnPlay.setAttribute(\"wnp-action\", \"Play\");\n                WNP.r.btnPlay.disabled = false;\n            };\n            WNP.d.prevTransportState = msg.CurrentTransportState; // Remember the last transport state\n            WNP.d.prevPlayMedium = msg.PlayMedium; // Remember the last PlayMedium\n        }\n\n        // If internet radio, there is no skipping... just start and stop!\n        if (msg.PlayMedium && msg.PlayMedium === \"RADIO-NETWORK\") {\n            WNP.r.btnPrev.disabled = true;\n            WNP.r.btnNext.disabled = true;\n        }\n        else {\n            WNP.r.btnPrev.disabled = false;\n            WNP.r.btnNext.disabled = false;\n        }\n\n    });\n\n    // On metadata\n    socket.on(\"metadata\", function (msg) {\n        if (!msg) { return false; }\n\n        // Source detection\n        var playMedium = (msg.PlayMedium) ? msg.PlayMedium : \"\";\n        var trackSource = (msg.TrackSource) ? msg.TrackSource : \"\";\n        var sourceIdent = WNP.getSourceIdent(playMedium, trackSource);\n        // Did the source ident change...?\n        if (sourceIdent !== WNP.d.prevSourceIdent) {\n            if (sourceIdent !== \"\") {\n                var identImg = document.createElement(\"img\");\n                identImg.src = sourceIdent;\n                identImg.alt = playMedium + \": \" + trackSource;\n                identImg.title = playMedium + \": \" + trackSource;\n                mediaSource.innerHTML = identImg.outerHTML;\n            }\n            else {\n                mediaSource.innerText = playMedium + \": \" + trackSource;\n            }\n            WNP.d.prevSourceIdent = sourceIdent; // Remember the last Source Ident\n        }\n\n        // Song Title, Subtitle, Artist, Album\n        WNP.r.mediaTitle.innerText = (msg.trackMetaData && msg.trackMetaData[\"dc:title\"]) ? msg.trackMetaData[\"dc:title\"] : \"\";\n        WNP.r.mediaSubTitle.innerText = (msg.trackMetaData && msg.trackMetaData[\"dc:subtitle\"]) ? msg.trackMetaData[\"dc:subtitle\"] : \"\";\n        WNP.r.mediaArtist.innerText = (msg.trackMetaData && msg.trackMetaData[\"upnp:artist\"]) ? msg.trackMetaData[\"upnp:artist\"] : \"\";\n        WNP.r.mediaAlbum.innerText = (msg.trackMetaData && msg.trackMetaData[\"upnp:album\"]) ? msg.trackMetaData[\"upnp:album\"] : \"\";\n        if (playMedium === \"SONGLIST-NETWORK\" && !trackSource && msg.CurrentTransportState === \"STOPPED\") {\n            WNP.r.mediaTitle.innerText = \"No Music Selected\";\n        }\n\n        // Audio quality\n        var songBitrate = (msg.trackMetaData && msg.trackMetaData[\"song:bitrate\"]) ? msg.trackMetaData[\"song:bitrate\"] : \"\";\n        var songBitDepth = (msg.trackMetaData && msg.trackMetaData[\"song:format_s\"]) ? msg.trackMetaData[\"song:format_s\"] : \"\";\n        var songSampleRate = (msg.trackMetaData && msg.trackMetaData[\"song:rate_hz\"]) ? msg.trackMetaData[\"song:rate_hz\"] : \"\";\n        WNP.r.mediaBitRate.innerText = (songBitrate > 0) ? ((songBitrate > 1000) ? (songBitrate / 1000).toFixed(2) + \" mbps, \" : songBitrate + \" kbps, \") : \"\";\n        WNP.r.mediaBitDepth.innerText = (songBitDepth > 0) ? ((songBitDepth > 24) ? \"24 bit/\" : songBitDepth + \" bit/\") : \"\";\n        WNP.r.mediaSampleRate.innerText = (songSampleRate > 0) ? (songSampleRate / 1000).toFixed(1) + \" kHz\" : \"\";\n        if (!songBitrate && !songBitDepth && !songSampleRate) {\n            WNP.r.mediaQualityIdent.style.display = \"none\";\n        }\n        else {\n            WNP.r.mediaQualityIdent.style.display = \"inline-block\";\n        }\n\n        // Audio quality ident badge (HD/Hi-res/CD/...)\n        var songQuality = (msg.trackMetaData && msg.trackMetaData[\"song:quality\"]) ? msg.trackMetaData[\"song:quality\"] : \"\";\n        var songActualQuality = (msg.trackMetaData && msg.trackMetaData[\"song:actualQuality\"]) ? msg.trackMetaData[\"song:actualQuality\"] : \"\";\n        var qualiIdent = WNP.getQualityIdent(songQuality, songActualQuality, songBitrate, songBitDepth, songSampleRate);\n        if (qualiIdent !== \"\") {\n            WNP.r.mediaQualityIdent.innerText = qualiIdent;\n            WNP.r.mediaQualityIdent.title = \"Quality: \" + songQuality + \", \" + songActualQuality;\n        }\n        else {\n            var identId = document.createElement(\"i\");\n            identId.className = \"bi bi-soundwave text-secondary\";\n            identId.title = \"Quality: \" + songQuality + \", \" + songActualQuality;\n            WNP.r.mediaQualityIdent.innerHTML = identId.outerHTML;\n        }\n\n        // Pre-process Album Art uri, if any is available from the metadata.\n        var albumArtUriRaw = (msg.trackMetaData && msg.trackMetaData[\"upnp:albumArtURI\"]) ? msg.trackMetaData[\"upnp:albumArtURI\"] : \"\";\n        var albumArtUri = WNP.checkAlbumArtURI(albumArtUriRaw, msg.metadataTimeStamp);\n\n        // Set Album Art, only if the track changed and the URI changed\n        var trackChanged = false;\n        var currentTrackInfo = WNP.r.mediaTitle.innerText + \"|\" + WNP.r.mediaSubTitle.innerText + \"|\" + WNP.r.mediaArtist.innerText + \"|\" + WNP.r.mediaAlbum.innerText;\n        var currentAlbumArt = WNP.r.albumArt.src;\n        if (WNP.d.prevTrackInfo !== currentTrackInfo) {\n            trackChanged = true;\n            WNP.d.prevTrackInfo = currentTrackInfo; // Remember the last track info\n            console.log(\"WNP\", \"Track changed:\", currentTrackInfo);\n        }\n        if (trackChanged && currentAlbumArt != albumArtUri) {\n            WNP.setAlbumArt(albumArtUri);\n        }\n\n        // Device volume\n        WNP.r.devVol.innerText = (msg.CurrentVolume) ? msg.CurrentVolume : \"-\"; // Set the volume on the UI\n        if (WNP.r.rVolume && (WNP.r.rVolume.value !== WNP.r.devVol.innerText)) { // If volume on the range slider is different then update the range input value\n            WNP.r.rVolume.value = WNP.r.devVol.innerText;\n        }\n\n        // Loop mode status\n        if (msg.LoopMode) {\n            switch (msg.LoopMode) {\n                case \"5\": // repeat-1 | shuffle\n                    WNP.r.btnRepeat.className = \"btn btn-outline-success\";\n                    WNP.r.btnRepeat.children[0].className = \"bi bi-repeat-1\";\n                    WNP.r.btnShuffle.className = \"btn btn-outline-success\";\n                    break;\n                case \"3\": // no repeat | shuffle\n                    WNP.r.btnRepeat.className = \"btn btn-outline-light\";\n                    WNP.r.btnRepeat.children[0].className = \"bi bi-repeat\";\n                    WNP.r.btnShuffle.className = \"btn btn-outline-success\";\n                    break;\n                case \"2\": // repeat | shuffle\n                    WNP.r.btnRepeat.className = \"btn btn-outline-success\";\n                    WNP.r.btnRepeat.children[0].className = \"bi bi-repeat\";\n                    WNP.r.btnShuffle.className = \"btn btn-outline-success\";\n                    break;\n                case \"1\": // repeat-1 | no shuffle\n                    WNP.r.btnRepeat.className = \"btn btn-outline-success\";\n                    WNP.r.btnRepeat.children[0].className = \"bi bi-repeat-1\";\n                    WNP.r.btnShuffle.className = \"btn btn-outline-light\";\n                    // change repeat icon\n                    break;\n                case \"0\": // repeat | no shuffle\n                    WNP.r.btnRepeat.className = \"btn btn-outline-success\";\n                    WNP.r.btnRepeat.children[0].className = \"bi bi-repeat\";\n                    WNP.r.btnShuffle.className = \"btn btn-outline-light\";\n                    break;\n                default: // no repeat | no shuffle #4\n                    WNP.r.btnRepeat.className = \"btn btn-outline-light\";\n                    WNP.r.btnRepeat.children[0].className = \"bi bi-repeat\";\n                    WNP.r.btnShuffle.className = \"btn btn-outline-light\";\n            }\n        }\n        else { // Unknown, so set default\n            WNP.r.btnRepeat.className = \"btn btn-outline-light\";\n            WNP.r.btnRepeat.children[0].className = \"bi bi-repeat\";\n            WNP.r.btnShuffle.className = \"btn btn-outline-light\";\n        }\n\n    });\n\n    // On device set\n    socket.on(\"device-set\", function (msg) {\n        // Device switch? Fetch settings and device info again.\n        socket.emit(\"server-settings\");\n        socket.emit(\"devices-get\");\n    });\n\n    // On device refresh\n    socket.on(\"devices-refresh\", function (msg) {\n        WNP.r.selDeviceChoices.innerHTML = \"<option disabled=\\\"disabled\\\">Waiting for devices...</em></li>\";\n        if (WNP.r.oDeviceList) WNP.r.oDeviceList.innerHTML = \"<li><span class=\\\"dropdown-header\\\">Waiting for devices...</span></li>\";\n    });\n\n    // On device action (i.e. for play, pause, next, previous)\n    socket.on(\"device-action\", function (msg, param) {\n        // Actions do not return a message.\n        // so we don't need to do anything here.\n        // Maybe later we can use this to show a notification or similar.\n        console.log(\"WNP\", \"Action:\", msg);\n    });\n\n    // On device API response\n    socket.on(\"device-api\", function (msg, param) {\n        // console.log(\"IO: device-api\", msg, param);\n        switch (msg) {\n            case \"getPresetInfo\":\n                // Preset info response\n                if (!param || param.preset_num < 1) {\n                    // No presets\n                    WNP.r.oPresetList.innerHTML = \"<li><span class=\\\"dropdown-header\\\">No presets found!</span></li>\";\n                    return false;\n                }\n                else {\n                    // Presets found\n                    WNP.r.oPresetList.innerHTML = \"\"; // Clear existing list\n                    var sCurrentTitle = WNP.r.mediaTitle.innerText;\n                    var sCurrentSubtitle = WNP.r.mediaSubTitle.innerText;\n                    param.preset_list.forEach((preset) => {\n                        var ddItem = document.createElement(\"li\");\n                        var ddItemA = document.createElement(\"a\");\n                        ddItemA.className = \"dropdown-item\";\n                        ddItemA.href = \"javascript:WNP.setPresetByNumber(\" + preset.number + \");\";\n                        ddItemA.innerHTML = \"<img src=\\\"\" + WNP.checkAlbumArtURI(preset.picurl, Date.now()) + \"\\\"/> \" + preset.name;\n                        if (sCurrentTitle === preset.name || sCurrentSubtitle === preset.name) {\n                            ddItemA.classList.add(\"active\");\n                            ddItemA.setAttribute(\"aria-current\", \"true\");\n                        }\n                        ddItem.appendChild(ddItemA);\n                        WNP.r.oPresetList.appendChild(ddItem);\n                    })\n                }\n                break;\n            case msg.startsWith(\"MCUKeyShortClick:\") ? msg : false:\n                // Preset set response, no further action needed\n                break;\n            case \"getPlayerStatus\":\n                // Player status response\n                // Called when getting volume\n                if (param && param.vol !== undefined) {\n                    WNP.r.devVol.innerText = param.vol;\n                }\n                break;\n            case msg.startsWith(\"setPlayerCmd:vol:\") ? msg : false:\n                // Volume set response\n                socket.emit(\"device-api\", \"getPlayerStatus\"); // Refresh volume UI\n                break;\n            default:\n                // No action\n                break;\n        }\n    });\n\n    // On server reboot\n    socket.on(\"server-reboot\", function (msg) {\n        // Possibly show a notification that reboot is in progress\n        console.log(\"WNP\", \"Server reboot:\", msg);\n    });\n\n    // On server update\n    socket.on(\"server-update\", function (msg) {\n        // Possibly show a notification that update is in progress\n        console.log(\"WNP\", \"Server update:\", msg);\n    });\n\n    // On server shutdown\n    socket.on(\"server-shutdown\", function (msg) {\n        // Possibly show a notification that shutdown is in progress\n        console.log(\"WNP\", \"Server shutdown:\", msg);\n    });\n\n};\n\n// =======================================================\n// Helper functions\n\n/**\n * Set device according to the chosen one through the Device dropup.\n * @param {string} deviceLocation - The location of the device to set.\n * @return {undefined}\n  */\nWNP.setDeviceByLocation = function (deviceLocation) {\n    if (deviceLocation) {\n        socket.emit(\"device-set\", deviceLocation);\n    }\n    return false;\n};\n\n/**\n * Set the preset on the device.\n * @param {integer} presetNumber - The number of the preset to set.\n * @return {undefined}\n */\n\nWNP.setPresetByNumber = function (presetNumber) {\n    if (presetNumber && !isNaN(presetNumber) && presetNumber > 0) {\n        socket.emit(\"device-api\", \"MCUKeyShortClick:\" + presetNumber);\n    }\n    return false;\n};\n\n/**\n * Get player progress helper.\n * @param {string} relTime - Time elapsed while playing, format 00:00:00\n * @param {string} trackDuration - Total play time, format 00:00:00\n * @param {integer} timeStampDiff - Possible play time offset in seconds\n * @param {string} currentTransportState - The current transport state \"PLAYING\" or otherwise\n * @returns {object} An object with corrected played, left, total and percentage played\n */\nWNP.getPlayerProgress = function (relTime, trackDuration, timeStampDiff, currentTransportState) {\n    var relTimeSec = this.convertToSeconds(relTime) + timeStampDiff;\n    var trackDurationSec = this.convertToSeconds(trackDuration);\n    if (trackDurationSec > 0 && relTimeSec < trackDurationSec) {\n        var percentPlayed = ((relTimeSec / trackDurationSec) * 100).toFixed(1);\n        return {\n            played: WNP.convertToMinutes(relTimeSec),\n            left: WNP.convertToMinutes(trackDurationSec - relTimeSec),\n            total: WNP.convertToMinutes(trackDurationSec),\n            percent: percentPlayed\n        };\n    }\n    else if (trackDurationSec == 0 && currentTransportState == \"PLAYING\") {\n        return {\n            played: \"Live\",\n            left: \"\",\n            total: \"\",\n            percent: 100\n        };\n    }\n    else {\n        return {\n            played: \"Paused\",\n            left: \"\",\n            total: \"\",\n            percent: 0\n        };\n    };\n};\n\n/**\n * Convert time format '00:00:00' to total number of seconds.\n * @param {string} sDuration - Time, format 00:00:00.\n * @returns {integer} The number of seconds that the string represents.\n */\nWNP.convertToSeconds = function (sDuration) {\n    const timeSections = sDuration.split(\":\");\n    let totalSeconds = 0;\n    for (let i = 0; i < timeSections.length; i++) {\n        var nFactor = timeSections.length - 1 - i; // Count backwards\n        var nMultiplier = Math.pow(60, nFactor); // 60^n\n        totalSeconds += nMultiplier * parseInt(timeSections[i]); // Calculate the seconds\n    }\n    return totalSeconds\n};\n\n/**\n * Convert number of seconds to '00:00' string format. \n * Sorry for those hour+ long songs...\n * @param {integer} seconds - Number of seconds total.\n * @returns {string} The string representation of seconds in minutes, format 00:00.\n */\nWNP.convertToMinutes = function (seconds) {\n    var tempDate = new Date(0);\n    tempDate.setSeconds(seconds);\n    var result = tempDate.toISOString().substring(14, 19);\n    return result;\n};\n\n/**\n * Check if the album art is a valid URI. Returns the URI if valid, otherwise a random URI.\n * Error handling is handled by the onerror event on the image itself.\n * @param {string} sAlbumArtUri - The URI of the album art.\n * @param {integer} nTimestamp - The time in milliseconds, used as cache buster.\n * @returns {string} The URI of the album art.\n */\nWNP.checkAlbumArtURI = function (sAlbumArtUri, nTimestamp) {\n    // If the URI starts with https, the self signed certificate may not trusted by the browser.\n    // Hence we always try and load the image through a reverse proxy, ignoring the certificate.\n    if (sAlbumArtUri && sAlbumArtUri.startsWith(\"https\")) {\n        var sAlbumArtProxyUri = \"\";\n        if (WNP.s.locPort != \"80\") { // If the server is not running on port 80, we need to add the port to the URI\n            sAlbumArtProxyUri = \"http://\" + WNP.s.locHostname + \":\" + WNP.s.locPort + \"/proxy-art?url=\" + encodeURIComponent(sAlbumArtUri) + \"&ts=\" + nTimestamp; // Use the current timestamp as cache buster\n        } else {\n            sAlbumArtProxyUri = \"http://\" + WNP.s.locHostname + \"/proxy-art?url=\" + encodeURIComponent(sAlbumArtUri) + \"&ts=\" + nTimestamp; // Use the current timestamp as cache buster\n        }\n        return sAlbumArtProxyUri;\n    } else if (sAlbumArtUri && sAlbumArtUri.startsWith(\"http\")) {\n        return sAlbumArtUri;\n    } else {\n        // Looks like an invalid/un_known album art, use the fallback.\n        return WNP.s.rndAlbumArtUri;\n    }\n};\n\n/**\n * Sets the album art. Both on the foreground and background.\n * @param {integer} imgUri - The URI of the album art.\n * @returns {undefined}\n */\nWNP.setAlbumArt = function (imgUri) {\n    console.log(\"WNP\", \"Set Album Art\", imgUri);\n    this.r.albumArt.src = imgUri;\n    this.r.bgAlbumArtBlur.style.backgroundImage = \"url('\" + imgUri + \"')\";\n};\n\n/**\n * Come up with a random album art URI (locally from the img folder).\n * @param {string} prefix - The prefix for the album art URI, i.e. 'fake-album-'\n * @returns {string} An URI for album art\n */\nWNP.rndAlbumArt = function (prefix) {\n    return \"./img/\" + prefix + this.rndNumber(1, 16) + \".jpg\";\n};\n\n/**\n * Get a random number between min and max, including min and max.\n * @param {integer} min - Minimum number to pick, keep it lower than max.\n * @param {integer} max - Maximum number to pick.\n * @returns {integer} The random number\n */\nWNP.rndNumber = function (min, max) {\n    return Math.floor(Math.random() * (max - min + 1)) + min;\n};\n\n/**\n * Get an identifier for the current play medium combined with the tracksource.\n * TODO: Verify all/most sources...\n * @param {string} playMedium - The PlayMedium as indicated by the device. Values: SONGLIST-NETWORK, RADIO-NETWORK, STATION-NETWORK, CAST, AIRPLAY, SPOTIFY, UNKOWN\n * @param {string} trackSource - The stream source as indicated by the device. Values: Prime, Qobuz, SPOTIFY, newTuneIn, iHeartRadio, Deezer, UPnPServer, Tidal, vTuner\n * @returns {string} The uri to the source identifier (image url)\n */\nWNP.getSourceIdent = function (playMedium, trackSource) {\n\n    var sIdentUri = \"\";\n\n    switch (playMedium.toLowerCase()) {\n        case \"airplay\":\n            sIdentUri = \"./img/sources/airplay2.png\";\n            break;\n        case \"third-dlna\":\n            sIdentUri = \"./img/sources/dlna2.png\";\n            break;\n        case \"cast\":\n            sIdentUri = \"./img/sources/chromecast2.png\";\n            break;\n        case \"radio-network\":\n            sIdentUri = \"./img/sources/radio.png\";\n            break;\n        case \"songlist-network\":\n            sIdentUri = \"./img/sources/ethernet2.png\";\n            break;\n        case \"spotify\":\n            sIdentUri = \"./img/sources/spotify.png\";\n            break;\n        case \"squeezelite\":\n            sIdentUri = \"./img/sources/music-assistant2.png\";\n            break;\n        case \"none\":\n            sIdentUri = \"./img/sources/none2.png\";\n            break;\n        case \"bluetooth\":\n            sIdentUri = \"./img/sources/bluetooth2.png\";\n            break;\n        case \"hdmi\":\n            sIdentUri = \"./img/sources/hdmi2.png\";\n            break;\n        case \"line-in\":\n            sIdentUri = \"./img/sources/line-in2.png\";\n            break;\n        case \"optical\":\n            sIdentUri = \"./img/sources/spdif2.png\";\n            break;\n    };\n\n    switch (trackSource.toLowerCase()) {\n        case \"deezer\":\n        case \"deezer2\":\n            sIdentUri = \"./img/sources/deezer.png\";\n            break;\n        case \"iheartradio\":\n            sIdentUri = \"./img/sources/iheart.png\";\n            break;\n        case \"newtunein\":\n            sIdentUri = \"./img/sources/newtunein.png\";\n            break;\n        case \"plex\":\n            sIdentUri = \"./img/sources/plex.png\";\n            break;\n        case \"prime\":\n            sIdentUri = \"./img/sources/amazon-music2.png\";\n            break;\n        case \"qobuz\":\n            sIdentUri = \"./img/sources/qobuz2.png\";\n            break;\n        case \"tidal\":\n            sIdentUri = \"./img/sources/tidal2.png\";\n            break;\n        case \"upnpserver\":\n            sIdentUri = \"./img/sources/dlna2.png\";\n            break;\n        case \"vtuner\":\n            sIdentUri = \"./img/sources/vtuner2.png\";\n            break;\n    };\n\n    return sIdentUri;\n\n};\n\n/**\n * Get an identifier for the current audio/song quality.\n * TODO: Verify all/most sources...\n * Found so far:\n * \n * CD Quality: 44.1 KHz/16 bit. Bitrate 1,411 kbps. For mp3 bitrate can vary, but also be 320/192/160/128/... kbps.\n * Hi-Res quality: 96 kHz/24 bit and up. Bitrate 9,216 kbps.\n * \n * Spotify Lossless: bitrate 700 kbps, 44.1 kHz/24 bit\n * Spotify and Pandora usual bitrate 160 kbps, premium is 320 kbps\n * Tidal has CD quality, and FLAC, MQA, Master, ...\n * Qobuz apparently really has hi-res?\n * Amazon Music (Unlimited) does Atmos?\n * Apple Music -> Airplay 2, does hi-res?\n * YouTube Music -> Cast, does what?\n * \n * TIDAL -\n * Sample High: \"song:quality\":\"2\",\"song:actualQuality\":\"LOSSLESS\"\n * Sample MQA: \"song:quality\":\"3\",\"song:actualQuality\":\"HI_RES\"\n * Sample FLAC: \"song:quality\":\"4\",\"song:actualQuality\":\"HI_RES_LOSSLESS\"\n * \n * @param {integer} songQuality - A number identifying the quality, as indicated by the streaming service(?).\n * @param {string} songActualQuality - An indicator for the actual quality, as indicated by the streaming service(?).\n * @param {integer} songBitrate - The current bitrate in kilobit per second.\n * @param {integer} songBitDepth - The current sample depth in bits.\n * @param {integer} songSampleRate - The current sample rate in Hz.\n * @returns {string} The identifier for the audio quality, just a string.\n */\nWNP.getQualityIdent = function (songQuality, songActualQuality, songBitrate, songBitDepth, songSampleRate) {\n    // console.log(songQuality, songActualQuality, songBitrate, songBitDepth, songSampleRate);\n\n    var sIdent = \"\";\n\n    if (songBitrate >= 700 && songBitDepth == 24 && songSampleRate == 44100) {\n        sIdent = \"Lossless\";\n    }\n    if (songBitrate > 1000 && songBitDepth == 16 && songSampleRate == 44100) {\n        sIdent = \"CD\";\n    }\n    else if (songBitrate > 7000 && songBitDepth >= 24 && songSampleRate >= 96000) {\n        sIdent = \"Hi-Res\";\n    }\n\n    // Based of Tidal/Amazon Music Unlimited/Deezer/Qobuz\n    switch (songQuality + \":\" + songActualQuality) {\n        case \"2:LOSSLESS\": // Tidal\n        case \":LOSSLESS\": // Tidal\n            sIdent = \"HIGH\";\n            break;\n        case \"3:HI_RES\": // Tidal\n            sIdent = \"MQA\";\n            break;\n        case \"4:HI_RES_LOSSLESS\": // Tidal\n        case \":HI_RES_LOSSLESS\": // Tidal\n        case \"0:LOSSLESS\": // Deezer\n            sIdent = \"FLAC\";\n            break;\n        case \":UHD\": // Amazon Music\n            sIdent = \"ULTRA HD\";\n            break;\n        case \":HD\":\n            sIdent = \"HD\"; // Amazon Music\n            break;\n        case \"3:7\":\n        case \"4:27\":\n            sIdent = \"Hi-Res\"; // Qobuz\n            break;\n        case \"2:6\":\n            sIdent = \"CD\"; // Qobuz\n            break;\n    };\n\n    return sIdent;\n\n};\n\n// =======================================================\n// Start WiiM Now Playing app\nWNP.Init();\n"],"names":["window","WNP","s","locHostname","location","hostname","locPort","port","rndAlbumArtUri","aDeviceUI","aServerUI","d","serverSettings","deviceList","prevTransportState","prevPlayMedium","prevSourceIdent","prevTrackInfo","r","Init","console","log","socket","io","connect","setUIReferences","setSocketDefinitions","setUIListeners","setTimeout","emit","rndAlbumArt","setInterval","addElementToRef","id","element","document","getElementById","forEach","btnPrev","addEventListener","wnpAction","getAttribute","disabled","btnPlay","btnNext","btnDevPreset","rVolume","isNaN","value","selDeviceChoices","btnRefresh","btnReboot","btnUpdate","btnShutdown","btnReloadUI","reload","on","msg","os","userInfo","shell","devName","innerText","selectedDevice","friendlyName","sUrl","toLowerCase","sServerUrlHostname","innerHTML","networkInterfaces","aIpAddress","sLocationIp","split","pop","sIpPattern","join","Object","keys","key","index","sIpFound","find","addr","address","startsWith","sServerUrlIP","sServerVersion","version","server","sClientVersion","client","sort","a","b","oDeviceList","devicesWiiM","filter","manufacturer","length","optGroup","createElement","label","device","opt","title","setAttribute","appendChild","ddItem","ddItemA","className","href","classList","add","devicesOther","timeStampDiff","CurrentTransportState","stateTimeStamp","metadataTimeStamp","Math","round","relTime","RelTime","trackDuration","TrackDuration","oPlayerProgress","getPlayerProgress","progressPlayed","children","played","progressLeft","left","progressPercent","percent","PlayMedium","playMedium","trackSource","TrackSource","sourceIdent","getSourceIdent","identImg","src","alt","mediaSource","outerHTML","mediaTitle","trackMetaData","mediaSubTitle","mediaArtist","mediaAlbum","songBitrate","songBitDepth","songSampleRate","mediaBitRate","toFixed","mediaBitDepth","mediaSampleRate","mediaQualityIdent","style","display","songQuality","songActualQuality","qualiIdent","getQualityIdent","identId","albumArtUriRaw","albumArtUri","checkAlbumArtURI","trackChanged","currentTrackInfo","currentAlbumArt","albumArt","setAlbumArt","devVol","CurrentVolume","LoopMode","btnRepeat","btnShuffle","param","preset_num","oPresetList","sCurrentTitle","sCurrentSubtitle","preset_list","preset","number","picurl","Date","now","name","undefined","vol","setDeviceByLocation","deviceLocation","setPresetByNumber","presetNumber","currentTransportState","relTimeSec","convertToSeconds","trackDurationSec","percentPlayed","convertToMinutes","total","sDuration","timeSections","totalSeconds","i","nMultiplier","pow","parseInt","seconds","tempDate","setSeconds","toISOString","substring","sAlbumArtUri","nTimestamp","encodeURIComponent","imgUri","bgAlbumArtBlur","backgroundImage","prefix","rndNumber","min","max","floor","random","sIdentUri","sIdent"],"version":3,"file":"client.bc59c7cc.js.map"}